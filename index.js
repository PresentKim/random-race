!function(){"use strict";var e,t,n={4471:function(e,t,n){function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,e),this.x=t,this.y=n}var t,n,i;return t=e,i=[{key:"from",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"number"==typeof t?new e(t,"number"==typeof n?n:t):t instanceof e?t:t instanceof HTMLCanvasElement||t instanceof HTMLImageElement?new e(t.width,t.height):new e(t.w,t.h)}}],(n=[{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(null!=t?t:this.x,null!=n?n:this.y)}},{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x+r.x,this.y+r.y)}},{key:"subtract",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x-r.x,this.y-r.y)}},{key:"multiply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x*r.x,this.y*r.y)}},{key:"divide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x/r.x,this.y/r.y)}},{key:"mod",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x%r.x,this.y%r.y)}},{key:"ceil",value:function(){return new e(Math.ceil(this.x),Math.ceil(this.y))}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"round",value:function(){return new e(Math.fround(this.x),Math.fround(this.y))}},{key:"abs",value:function(){return new e(Math.abs(this.x),Math.abs(this.y))}},{key:"reverse",value:function(){throw new e(-this.x,-this.y)}},{key:"flip",value:function(){throw new e(this.y,this.x)}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return Math.sqrt(this.distanceSquared(r))}},{key:"distanceSquared",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2)}}])&&o(t.prototype,n),i&&o(t,i),e}(),a=function(e,t,n,r,o){return new i(t,n).subtract(e.offsetLeft,e.offsetTop).multiply(r/e.offsetWidth,o/e.offsetHeight)};function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.activities=[],this.canvas=t,this.mouseVec=new i,this.elapsedSecs=0,this.lastUpdate=-1,this.canvas.onclick=function(e){if(0===e.button){var t=a(n.canvas,e.pageX,e.pageY,n.canvas.width,n.canvas.height);n.activities.slice().reverse().some((function(e){return e.mouseClick(t,t.add(e.camera))}))}},this.canvas.onmousemove=function(e){n.mouseVec=a(n.canvas,e.pageX,e.pageY,n.canvas.width,n.canvas.height)}}var t,n;return t=e,(n=[{key:"ctx",get:function(){var e=this.canvas.getContext("2d");if(!e)throw"Can't get context from canvas";return e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e}},{key:"update",value:function(){var e,t=this,n=Date.now();if(-1!==this.lastUpdate){var r=-1===this.lastUpdate?0:n-this.lastUpdate;this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.activities=this.activities.filter((function(e){return!e.isDestroyed&&(e.update(r),e.render(t.ctx),!0)}))}this.lastUpdate=n,this.activities.slice().reverse().some((function(e){return e.mouseHover(t.mouseVec,t.mouseVec.add(e.camera))})),e=this.update.bind(this),window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.setTimeout(e,1e3/60)}},{key:"addActivity",value:function(e){this.activities.push(e)}}])&&u(t.prototype,n),e}();function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._hidden=!1,this._absolute=!1,this._scale=1,this._rotate=0,this._hue=0,this._brightness=1,this._contrast=1,this._grayscale=!1,this._drawBox=null}var t,n;return t=e,(n=[{key:"hidden",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hidden=e,this}},{key:"absolute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._absolute=e,this}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._scale=e,this}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._rotate=e,this}},{key:"hue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._hue=e,this}},{key:"brightness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._brightness=e,this}},{key:"contrast",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._contrast=e,this}},{key:"grayscale",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._grayscale=e,this}},{key:"drawBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._drawBox=e,this}},{key:"applyFilter",value:function(e){var t="none"===e.filter?"":e.filter;0!==this._rotate&&e.rotate(-this._rotate),0!==this._hue&&(t+=" hue-rotate(".concat(this._hue,"deg) ")),1!==this._brightness&&(t+=" brightness(".concat(this._brightness,") ")),1!==this._contrast&&(t+=" contrast(".concat(this._contrast,") ")),this._grayscale&&(t+=" grayscale(1) "),this._drawBox&&(e.rect(this._drawBox.minX,this._drawBox.minY,this._drawBox.maxX,this._drawBox.maxY),e.clip(),e.clearRect(this._drawBox.minX,this._drawBox.minY,this._drawBox.maxX,this._drawBox.maxY)),e.filter=t}}])&&c(t.prototype,n),e}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new l;f(this,e),this.children=[],this.renderOption=null!=t?t:new l,this.isDestroyed=!1,this.hoverOutDelay=0,this.onUpdate=function(){},this.onRender=function(){},this.onDestroy=function(){},this.onMouseClick=function(){return!1},this.onMouseHover=function(){return!1},this.onMouseHoverOut=function(){},this.init()}var t,n;return t=e,(n=[{key:"init",value:function(){}},{key:"update",value:function(e){this.children=this.children.filter((function(t){return!t.isDestroyed&&(t.update(e),!0)})),this.hoverOutDelay>0&&(this.hoverOutDelay-=e,this.hoverOutDelay<=0&&(this.hoverOutDelay=0,this.onMouseHoverOut(this))),this.onUpdate(e,this)}},{key:"render",value:function(e){if(!this.isDestroyed&&!this.isHidden()){if(e.save(),this.renderOption.applyFilter(e),this.children.forEach((function(t){e.save(),t.render(e),e.restore()})),this.onRender(e,this),new URLSearchParams(window.location.search).get("renderBoundingBox")){var t=this.getBoundingBox();t&&(e.beginPath(),e.moveTo(t.minX,t.minY),e.lineTo(t.minX,t.maxY),e.lineTo(t.maxX,t.maxY),e.lineTo(t.maxX,t.minY),e.closePath(),e.stroke())}e.restore()}}},{key:"mouseClick",value:function(e,t){if(this.isDestroyed)return!1;var n=this.getBoundingBox();return!(n&&!n.isInside(this.isAbsolute()?e:t))&&(this.onMouseClick(e,t,this)||-1!==this.children.slice().reverse().findIndex((function(n){return n.mouseClick(e,t)})))}},{key:"mouseHover",value:function(e,t){if(this.isDestroyed)return!1;var n=this.getBoundingBox();return!(!n||!n.isInside(this.isAbsolute()?e:t))&&(this.hoverOutDelay=20,this.onMouseHover(e,t,this)||-1!==this.children.slice().reverse().findIndex((function(n){return n.mouseHover(e,t)})))}},{key:"destroy",value:function(){this.isDestroyed=!0,this.onDestroy(this)}},{key:"setOnUpdate",value:function(e){return this.onUpdate=e,this}},{key:"setOnRender",value:function(e){return this.onRender=e,this}},{key:"setOnMouseClick",value:function(e){return this.onMouseClick=e,this}},{key:"setOnMouseHover",value:function(e){return this.onMouseHover=e,this}},{key:"setOnMouseHoverOut",value:function(e){return this.onMouseHoverOut=e,this}},{key:"setRenderOption",value:function(e){return this.renderOption=e,this}},{key:"isAbsolute",value:function(){return this.renderOption._absolute}},{key:"isHidden",value:function(){return this.renderOption._hidden}},{key:"isHover",value:function(){return this.hoverOutDelay>0}},{key:"getScale",value:function(){return this.renderOption._scale}},{key:"getDrawBox",value:function(){return this.renderOption._drawBox}},{key:"getBoundingBox",value:function(){return null}}])&&h(t.prototype,n),e}();function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new i;if(p(this,e),this.min=i.from(t),this.max=i.from(n),this.min.x>this.max.x){var r=[this.max.x,this.min.x];this.min.x=r[0],this.max.x=r[1]}if(this.min.y>this.max.y){var o=[this.max.y,this.min.y];this.min.y=o[0],this.max.y=o[1]}}var t,n,r;return t=e,r=[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return new e(i.from(t,r),i.from(void 0===n?t:n,void 0===o?r:o))}}],(n=[{key:"minX",get:function(){return this.min.x}},{key:"minY",get:function(){return this.min.y}},{key:"maxX",get:function(){return this.max.x}},{key:"maxY",get:function(){return this.max.y}},{key:"xLength",get:function(){return this.max.x-this.min.x}},{key:"yLength",get:function(){return this.max.y-this.min.y}},{key:"isInside",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=i.from(e,t);return this.min.x<n.x&&this.max.x>n.x&&this.min.y<n.y&&this.max.y>n.y}},{key:"add",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=i.from(t,n);return new e(this.min.add(r),this.max.add(r))}},{key:"subtract",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=i.from(t,n);return new e(this.min.subtract(r),this.max.subtract(r))}},{key:"expand",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=i.from(t,n);return new e(this.min.subtract(r),this.max.add(r))}},{key:"contract",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=i.from(t,n);return new e(this.min.add(r),this.max.subtract(r))}},{key:"ceil",value:function(){return e.from(this.min.ceil(),this.max.ceil())}},{key:"floor",value:function(){return e.from(this.min.floor(),this.max.floor())}},{key:"round",value:function(){return e.from(this.min.round(),this.max.round())}},{key:"clone",value:function(){return e.from(this.min,this.max)}}])&&y(t.prototype,n),r&&y(t,r),e}();function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(o){var n=x(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return g(this,e)});function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(t=a.call(this)).app=e,t.camera=new i,t}return t=u,(n=[{key:"relocation",value:function(e){}},{key:"addWidget",value:function(e){this.children.push(e),e.app=this.app,e.activity=this}},{key:"render",value:function(e){var t=this;this.isDestroyed||this.isHidden()||this.children.forEach((function(n){n.isAbsolute()||(e.save(),e.translate(-t.camera.x,-t.camera.y)),n.render(e),n.isAbsolute()||e.restore()}))}},{key:"getBoundingBox",value:function(){return v.from(0,this.app.canvas)}},{key:"isAbsolute",value:function(){return!0}},{key:"viewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new i(this.vw(e),this.vh(t))}},{key:"vw",value:function(e){return this.app.canvas.width/100*e}},{key:"vh",value:function(e){return this.app.canvas.height/100*e}}])&&w(t.prototype,n),u}(d);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function j(e){var t="function"==typeof Map?new Map:void 0;return(j=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return B(e,arguments,C(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),R(r,e)})(e)}function B(e,t,n){return(B=P()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&R(o,n.prototype),o}).apply(null,arguments)}function P(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(a,e);var t,n,r,o,i=(t=a,n=P(),function(){var e,r=C(t);if(n){var o=C(this).constructor;e=Reflect.construct(r,arguments,o)}else e=r.apply(this,arguments);return S(this,e)});function a(){return _(this,a),i.apply(this,arguments)}return r=a,(o=[{key:"random",value:function(){var e=Array.from(this.values());return e[Math.floor(e.length*Math.random()<<0)]}}])&&E(r.prototype,o),a}(j(Map)),M=n.p+"dabbf6f039293f5fb010f850e89e6ea9.png",D=n.p+"48d13a68747f46f4bea77f7edeb9c692.png",H=n.p+"963d9fb14b4767e9fe51e0838781db46.png",A=n.p+"89273dd68fcf9f3042c0620ed2ea1469.png",T=n.p+"ca4a0837d0daf434187bcad319aee5f0.png",F=n.p+"17e5683a05c9fe1824ad11cbbe19afac.png",L=n.p+"25fea8a198f2a3790636d991374e1260.png",U=n.p+"3df5a9b4e9c2ee05b2724e98d7659e14.png",q=n.p+"f4ae9b0f20451ce02e7fa7f78b3a1622.png",W=n.p+"1d48b48b6ebf621fd4d5d51df21ab142.png",N=M,X=D,Y=H,z=A,J=T,G=F,V=L,K=U,Q=(new I).set("PinkMan",J).set("MaskMan",G).set("NinjaFrog",V).set("VirtualGuy",K),Z=(new I(Q.entries()),q),$=W,ee=(new I).set("CharacterAppearing",Z).set("CollectedItem",$);function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ne=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.w,r=t.h,o=t.sx,i=t.sy,a=t.ox,u=t.oy;this.w=null!=n?n:0,this.h=null!=r?r:0,this.sx=null!=o?o:0,this.sy=null!=i?i:0,this.ox=null!=a?a:0,this.oy=null!=u?u:0,this._image=null}var t,n,r;return t=e,r=[{key:"from",value:function(t,n,r,o,i,a){return new e({w:t,h:n,sx:r,sy:o,ox:i,oy:a})}}],(n=[{key:"getImage",value:function(){return this._image}},{key:"setImage",value:function(e){return e instanceof HTMLImageElement?this._image=e:"string"==typeof e?(this._image=new Image,this._image.src=e):this._image=null,this}},{key:"update",value:function(e){}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.getImage();if(r&&r.complete&&0!==r.naturalHeight){var o=i.from(t);e.save(),e.translate(o.x,o.y),e.drawImage(r,this.sx,this.sy,this.w,this.h,-this.ox*n/2,-this.oy*n/2,this.w*n,this.h*n),e.restore()}}}])&&te(t.prototype,n),r&&te(t,r),e}(),re=JSON.parse('[{"name":"a","w":8,"h":10,"sx":0,"sy":0},{"name":"b","w":8,"h":10,"sx":8,"sy":0},{"name":"c","w":8,"h":10,"sx":16,"sy":0},{"name":"d","w":8,"h":10,"sx":24,"sy":0},{"name":"e","w":8,"h":10,"sx":32,"sy":0},{"name":"f","w":8,"h":10,"sx":40,"sy":0},{"name":"g","w":8,"h":10,"sx":48,"sy":0},{"name":"h","w":8,"h":10,"sx":56,"sy":0},{"name":"i","w":8,"h":10,"sx":64,"sy":0},{"name":"j","w":8,"h":10,"sx":72,"sy":0},{"name":"k","w":8,"h":10,"sx":0,"sy":10},{"name":"l","w":8,"h":10,"sx":8,"sy":10},{"name":"m","w":8,"h":10,"sx":16,"sy":10},{"name":"n","w":8,"h":10,"sx":24,"sy":10},{"name":"o","w":8,"h":10,"sx":32,"sy":10},{"name":"p","w":8,"h":10,"sx":40,"sy":20},{"name":"q","w":8,"h":10,"sx":40,"sy":10},{"name":"r","w":8,"h":10,"sx":48,"sy":10},{"name":"s","w":8,"h":10,"sx":56,"sy":10},{"name":"t","w":8,"h":10,"sx":64,"sy":10},{"name":"u","w":8,"h":10,"sx":72,"sy":10},{"name":"v","w":8,"h":10,"sx":0,"sy":20},{"name":"w","w":8,"h":10,"sx":8,"sy":20},{"name":"x","w":8,"h":10,"sx":16,"sy":20},{"name":"y","w":8,"h":10,"sx":24,"sy":20},{"name":"z","w":8,"h":10,"sx":32,"sy":20},{"name":"0","w":8,"h":10,"sx":0,"sy":30},{"name":"1","w":8,"h":10,"sx":8,"sy":30},{"name":"2","w":8,"h":10,"sx":16,"sy":30},{"name":"3","w":8,"h":10,"sx":24,"sy":30},{"name":"4","w":8,"h":10,"sx":32,"sy":30},{"name":"5","w":8,"h":10,"sx":40,"sy":30},{"name":"6","w":8,"h":10,"sx":48,"sy":30},{"name":"7","w":8,"h":10,"sx":56,"sy":30},{"name":"8","w":8,"h":10,"sx":64,"sy":30},{"name":"9","w":8,"h":10,"sx":72,"sy":30},{"name":".","w":8,"h":10,"sx":0,"sy":40},{"name":",","w":8,"h":10,"sx":8,"sy":40},{"name":":","w":8,"h":10,"sx":16,"sy":40},{"name":"?","w":8,"h":10,"sx":24,"sy":40},{"name":"!","w":8,"h":10,"sx":32,"sy":40},{"name":"(","w":8,"h":10,"sx":40,"sy":40},{"name":")","w":8,"h":10,"sx":48,"sy":40},{"name":"+","w":8,"h":10,"sx":56,"sy":40},{"name":"-","w":8,"h":10,"sx":64,"sy":40}]'),oe=JSON.parse('[{"name":"blue","w":64,"h":64,"sx":0,"sy":0},{"name":"brown","w":64,"h":64,"sx":64,"sy":0},{"name":"pink","w":64,"h":64,"sx":128,"sy":0},{"name":"gray","w":64,"h":64,"sx":0,"sy":64},{"name":"green","w":64,"h":64,"sx":64,"sy":64},{"name":"purple","w":64,"h":64,"sx":128,"sy":64},{"name":"yellow","w":64,"h":64,"sx":128,"sy":0}]'),ie=JSON.parse('[{"name":"achievements","w":20,"h":20,"sx":0,"sy":0},{"name":"leaderboard","w":20,"h":20,"sx":20,"sy":0},{"name":"settings","w":20,"h":20,"sx":40,"sy":0},{"name":"sound_on","w":20,"h":20,"sx":60,"sy":0},{"name":"sound_off","w":20,"h":20,"sx":80,"sy":0},{"name":"prev","w":20,"h":20,"sx":0,"sy":20},{"name":"next","w":20,"h":20,"sx":20,"sy":20},{"name":"play","w":20,"h":20,"sx":40,"sy":20},{"name":"pause","w":20,"h":20,"sx":60,"sy":20},{"name":"reset","w":20,"h":20,"sx":80,"sy":20},{"name":"fullscreen_enter","w":20,"h":20,"sx":0,"sy":40},{"name":"fullscreen_exit","w":20,"h":20,"sx":20,"sy":40},{"name":"buttons","w":20,"h":20,"sx":40,"sy":40},{"name":"close","w":20,"h":20,"sx":0,"sy":60},{"name":"back","w":20,"h":20,"sx":20,"sy":60},{"name":"death","w":20,"h":20,"sx":40,"sy":60}]'),ae=JSON.parse('[{"name":"start_game","w":76,"h":14,"sx":0,"sy":0},{"name":"description","w":84,"h":14,"sx":0,"sy":14}]');function ue(e,t){var n=new I;return t.forEach((function(t){var r;n.set(null!==(r=t.name)&&void 0!==r?r:n.size+"",new ne(t).setImage(e))})),n}var se=ue(N,re),ce=ue(X,oe),le=ue(Y,ie),fe=ue(z,ae);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t,n){return(pe="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=me(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ve(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var we=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=me(r);if(o){var n=me(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ve(this,e)});function a(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);var r=t.fps,o=t.count;(n=i.call(this,t)).fps=r,n.frames=[],n.count=0,n.loop=-1,n.elapsedSecs=0,n.onAnimationEnd=function(){},n.setImage(e);for(var u=0;u<o;++u)n.frames[u]=ne.from(n.w,n.h,n.sx+u*n.w,n.sy,n.ox,n.oy).setImage(e),++n.count;return n}return t=a,(n=[{key:"setImage",value:function(e){return pe(me(a.prototype),"setImage",this).call(this,e),this.frames.forEach((function(t){return t.setImage(e)})),this}},{key:"getCurrentFrame",value:function(){var e,t=this.frames[Math.floor(this.elapsedSecs/this.fps)];return t||(0!==this.loop?(-1!==this.loop&&--this.loop,this.elapsedSecs=0,t=this.frames[0]):(t=this.frames[this.frames.length-1],this.onAnimationEnd&&this.onAnimationEnd(this))),null!==(e=t)&&void 0!==e?e:null}},{key:"setFps",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:60;return this.fps=e,this}},{key:"setLoop",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return this.loop=e,this}},{key:"setOnAnimationEnd",value:function(e){return this.onAnimationEnd=e,this}},{key:"update",value:function(e){this.elapsedSecs+=e}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.getCurrentFrame();null!==r&&r.draw(e,t,n)}},{key:"reset",value:function(){this.elapsedSecs=0}},{key:"clone",value:function(){return new a(this.getImage(),this)}}])&&de(t.prototype,n),a}(ne),be=JSON.parse('{"NL":{"fps":60,"w":32,"h":32,"ox":15,"oy":31,"sx":0,"sy":0,"count":11},"KH":{"fps":60,"w":32,"h":32,"ox":15,"oy":31,"sx":0,"sy":32,"count":12},"bF":{"fps":60,"w":32,"h":32,"ox":15,"oy":31,"sx":0,"sy":64,"count":7}}'),ge=JSON.parse('{"fps":60,"w":32,"h":32,"ox":0,"oy":0,"sx":0,"sy":0,"count":6}'),xe=JSON.parse('{"in":{"fps":90,"w":96,"h":96,"ox":16,"oy":32,"sx":0,"sy":0,"count":7},"C":{"fps":90,"w":96,"h":96,"ox":16,"oy":32,"sx":0,"sy":96,"count":7}}'),ke=function(e){return new we(null!=e?e:null,be.KH)},Oe=function(e){return new we(null!=e?e:null,be.bF)},_e=new we(ee.get("CollectedItem"),ge);function Ee(e){return(Ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pe(e,t){return!t||"object"!==Ee(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Re(e){return(Re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ce=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Re(r);if(o){var n=Re(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Pe(this,e)});function u(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new l;return Se(this,u),(e=a.call(this,n)).app=null,e.activity=null,e.pos=null!=t?t:new i,e}return t=u,(n=[{key:"setPos",value:function(e){return this.pos=e,this}}])&&je(t.prototype,n),u}(d);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Te(r);if(o){var n=Te(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ae(this,e)});function u(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new l;return Me(this,u),(n=a.call(this,e,r)).text=t,n}return t=u,(n=[{key:"init",value:function(){var e=this;this.onRender=function(t){for(var n=e.getScale()/2,r=8*n,o=10*n,i=e.text.split("\n"),a=i.length,u=0;u<a;++u)for(var s=i[u],c=s.length,l=0;l<c;++l){var f=se.get(s.charAt(l).toLowerCase());f&&f.draw(t,e.pos.subtract((c-2*l)*r,(a-2*u)*o),e.getScale())}}}},{key:"getBoundingBox",value:function(){var e=this.text.split("\n"),t=e.reduce((function(e,t){return Math.max(e,t.length)}),0),n=i.from(t,e.length).multiply(8,10).multiply(this.getScale()/2);return v.from(this.pos).expand(n)}},{key:"setText",value:function(e){return this.text=e,this}}])&&De(t.prototype,n),u}(Ce);function Le(e){return(Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function We(e,t){return(We=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t){return!t||"object"!==Le(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xe(e){return(Xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&We(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Xe(r);if(o){var n=Xe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ne(this,e)});function u(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new l;return Ue(this,u),(t=a.call(this,e,r)).sprite=n,t}return t=u,(n=[{key:"init",value:function(){var e=this;this.onRender=function(t){if(e.sprite&&e.sprite.getImage()){var n=i.from(e.sprite).multiply(e.getScale()/2);e.sprite.draw(t,e.pos.subtract(n),e.getScale())}},this.onUpdate=function(t){var n;null===(n=e.sprite)||void 0===n||n.update(t)}}},{key:"getBoundingBox",value:function(){if(!this.sprite)return null;var e=i.from(this.sprite).multiply(this.getScale()/2);return v.from(this.pos.subtract(new i(this.sprite.ox,this.sprite.oy).multiply(this.getScale()/2))).expand(e)}},{key:"setSprite",value:function(e){return this.sprite=e,this}}])&&qe(t.prototype,n),u}(Ce);function ze(e){return(ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ke(e,t){return!t||"object"!==ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ze,$e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(u,e);var t,n,r,o,a=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Qe(r);if(o){var n=Qe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ke(this,e)});function u(){return Je(this,u),a.apply(this,arguments)}return t=u,(n=[{key:"init",value:function(){var e=this;this.onRender=function(t){var n;if(e.activity&&e.sprite)for(var r=(null!==(n=e.getDrawBox())&&void 0!==n?n:e.activity.getBoundingBox()).add(e.pos.mod(e.sprite)).expand(i.from(e.sprite).multiply(2)).floor(),o=r.min.x;o<r.max.x;o+=e.sprite.w)for(var a=r.min.y;a<r.max.y;a+=e.sprite.h)e.sprite.draw(t,new i(o,a),e.getScale())}}},{key:"getBoundingBox",value:function(){return this.getDrawBox()}},{key:"isAbsolute",value:function(){return!0}}])&&Ge(t.prototype,n),u}(Ye);function et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var tt=null!==(Ze=window.document)&&void 0!==Ze?Ze:{},nt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n;return t=e,n=[{key:"isSupport",get:function(){return Boolean(tt.fullscreenEnabled||tt.webkitFullscreenEnabled||tt.msFullscreenEnabled||tt.mozFullScreenEnabled)}},{key:"isEnabled",get:function(){return this.isSupport&&Boolean(tt.fullscreenElement||tt.webkitFullscreenElement||tt.webkitCurrentFullScreenElement||tt.msFullscreenElement||tt.mozFullScreenElement)}},{key:"request",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt.documentElement,n=null!==(e=t)&&void 0!==e?e:{},r=n.requestFullscreen||n.webkitRequestFullscreen||n.msRequestFullscreen||n.mozRequestFullScreen;return!!r&&(r.call(n),!0)}},{key:"exit",value:function(){var e=tt.exitFullscreen||tt.webkitExitFullscreen||tt.webkitCancelFullScreen||tt.msExitFullscreen||tt.mozCancelFullScreen;return!!e&&(e.call(tt),!0)}},{key:"toggle",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tt.documentElement;return this.isEnabled?this.exit():this.request(e)}},{key:"onChange",value:function(e){["","webkit","moz","ms"].forEach((function(t){return tt.addEventListener(t+"fullscreenchange",e,!1)}))}}],null&&et(t.prototype,null),n&&et(t,n),e}();function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return(it=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function at(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var st=function(e,t){return t.renderOption.scale(t.isHover()?6.5:6),!0},ct=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&it(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ut(r);if(o){var n=ut(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return at(this,e)});function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e);var n,r=(n=Q.get("PinkMan"),new we(null!=n?n:null,be.NL)),o=ke(Q.get("PinkMan"));r.setLoop(4).setOnAnimationEnd((function(){return t.titleCharacter.sprite=o.setLoop(6)})),o.setLoop(6).setOnAnimationEnd((function(){return t.titleCharacter.sprite=r.setLoop(4)})),t.background=new $e(null,ce.random()),t.titleText=new Fe(null,"random race",(new l).absolute().scale(12)),t.titleCharacter=new Ye(null,o,(new l).absolute().scale(5)),t.startGameButton=new Ye(null,fe.get("start_game"),(new l).absolute()),t.descriptionButton=new Ye(null,fe.get("description"),(new l).absolute()),t.reloadButton=new Ye(null,le.get("reset"),(new l).absolute().scale(3)),t.fullscreenButton=null,nt.isSupport&&(t.fullscreenButton=new Ye(t.reloadButton.pos.subtract(t.vw(7),0),le.get("fullscreen_enter"),(new l).absolute().scale(3)),t.fullscreenButton.setOnMouseClick((function(){return nt.toggle(document.body)})).setOnUpdate(st),nt.onChange((function(){var e;t.fullscreenButton.sprite=null!==(e=le.get(nt.isEnabled?"fullscreen_exit":"fullscreen_enter"))&&void 0!==e?e:null}))),t.background.setOnUpdate((function(e){return t.background.pos.x-=e/10})),t.titleCharacter.setOnMouseClick((function(e){r.fps-=3,o.fps-=3,r.fps<0&&(r.fps=100,o.fps=100),t.addWidget(new Fe(e.add(80*Math.random()-40,0),100===r.fps?"-100":"+3",(new l).absolute()).setRenderOption((new l).scale(2).absolute().hue(360*Math.random()).brightness(6).contrast(2)).setOnUpdate((function(e,t){t instanceof Fe?(t.pos.y-=e/20,t.pos.y<0&&t.destroy()):t.destroy()})))})),t.startGameButton.setOnUpdate((function(e,t){return t.renderOption.scale(t.isHover()?10.5:10)||!0})),t.descriptionButton.setOnUpdate((function(e,t){return t.renderOption.scale(t.isHover()?8.5:8)||!0})),t.reloadButton.setOnMouseClick((function(){var e,n;return t.background.setSprite(ce.random()),t.titleCharacter.setSprite(Oe(null!==(e=null===(n=t.titleCharacter.sprite)||void 0===n?void 0:n.getImage())&&void 0!==e?e:null).setLoop(1).setOnAnimationEnd((function(){t.titleCharacter.setSprite(new we(ee.get("CharacterAppearing"),xe.in).setLoop(0).setOnAnimationEnd((function(){var e=Q.random();r.setImage(e),o.setImage(e),t.titleCharacter.sprite=r.setLoop(1)})))}))),!0})).setOnUpdate(st),t.runners=[];for(var u=function(e){var n=new Ye(t.viewport(100*Math.random(),100));n.setOnUpdate((function(e){var r,o,i=t.getBoundingBox().add(t.camera).maxX;(null!==(r=null===(o=n.getBoundingBox())||void 0===o?void 0:o.minX)&&void 0!==r?r:0)>i&&(n.pos.x=t.camera.x,n.sprite=null),n.sprite||(n.renderOption.scale(5*Math.random()+5),n.sprite=ke(Q.random()).setFps(60*Math.random()+30)),n.sprite instanceof we&&-1===n.sprite.loop&&(n.pos.x+=e/3*(60/n.sprite.fps)),n.sprite.update(e)})).setOnMouseClick((function(){if(n.sprite instanceof we&&-1===n.sprite.loop)return n.setSprite(Oe(n.sprite.getImage()).setLoop(0).setOnAnimationEnd((function(){n.setSprite(new we(ee.get("CharacterAppearing"),xe.C).setLoop(0).setOnAnimationEnd((function(){n.pos.x=t.camera.x,n.sprite=null})))}))),!0})),t.runners[e]=n},s=0;s<30;++s)u(s);return new URLSearchParams(window.location.search).get("renderMouseClick")&&t.setOnMouseClick((function(e){var n=_e.clone().setLoop(0),r=new Ye(e,n,(new l).absolute().scale(4));n.setOnAnimationEnd((function(){return r.destroy()})),t.addWidget(r)})),t.setOnUpdate((function(e){t.camera.x+=e/10})),t.addWidget(t.background),t.addWidget(t.titleText),t.addWidget(t.titleCharacter),t.addWidget(t.startGameButton),t.addWidget(t.descriptionButton),t.addWidget(t.reloadButton),t.fullscreenButton&&t.addWidget(t.fullscreenButton),t.runners.forEach((function(e){return t.addWidget(e)})),t.relocation(1),t}return t=a,(n=[{key:"relocation",value:function(e){var t=this;this.titleText.pos=this.viewport(50,10),this.titleCharacter.pos=this.titleText.getBoundingBox().min.add(-this.vw(2),this.titleText.getBoundingBox().max.y/1.5),this.startGameButton.pos=this.viewport(50,30),this.descriptionButton.pos=this.viewport(50,50),this.reloadButton.pos=this.viewport(95,10),this.fullscreenButton&&(this.fullscreenButton.pos=this.reloadButton.pos.subtract(this.vw(7),0)),this.runners.forEach((function(n){return n.pos.set(n.pos.x*e,t.vh(100))}))}}])&&ot(t.prototype,n),a}(k),lt=document.createElement("canvas");lt.id="game";var ft=new s(lt);function ht(){var e=lt.width;lt.width=Math.min(2520,Math.max(1920,window.innerWidth/window.innerHeight*1080)),lt.height=1080,e!==lt.width&&ft.activities.forEach((function(t){return t.relocation(e/lt.width)}))}document.addEventListener("DOMContentLoaded",(function(){ht(),document.body.appendChild(lt),ft.addActivity(new ct(ft)),ft.update()})),window.addEventListener("resize",ht),window.addEventListener("orientationchange",ht),nt.isSupport&&window.screen&&screen.orientation&&screen.orientation.lock&&nt.onChange((function(){if(nt.isEnabled&&!(window.innerWidth>window.innerHeight)){var e=screen.orientation.type;"portrait-primary"!==e&&"portrait-secondary"!==e||screen.orientation.lock("landscape")}})),"serviceWorker"in navigator&&window.addEventListener("load",(function(){return navigator.serviceWorker.register("/sw.js")}))}},r={};function o(e){var t=r[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var i=r[e]={exports:{}};try{var a={id:e,module:i,factory:n[e],require:o};o.i.forEach((function(e){e(a)})),i=a.module,a.factory.call(i.exports,i,i.exports,a.require)}catch(e){throw i.error=e,e}return i.exports}o.m=n,o.c=r,o.i=[],o.hu=function(e){return e+"."+o.h()+".hot-update.js"},o.hmrF=function(){return"index."+o.h()+".hot-update.json"},o.h=function(){return"5681a9e488fd8f36767d"},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},e={},t="random-race:",o.l=function(n,r,i,a){if(e[n])e[n].push(r);else{var u,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var f=c[l];if(f.getAttribute("src")==n||f.getAttribute("data-webpack")==t+i){u=f;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,o.nc&&u.setAttribute("nonce",o.nc),u.setAttribute("data-webpack",t+i),u.src=n),e[n]=[r];var h=function(t,r){u.onerror=u.onload=null,clearTimeout(d);var o=e[n];if(delete e[n],u.parentNode&&u.parentNode.removeChild(u),o&&o.forEach((function(e){return e(r)})),t)return t(r)},d=setTimeout(h.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=h.bind(null,u.onerror),u.onload=h.bind(null,u.onload),s&&document.head.appendChild(u)}},function(){var e,t,n,r,i={},a=o.c,u=[],s=[],c="idle";function l(e){c=e;for(var t=0;t<s.length;t++)s[t].call(null,e)}function f(e){if(0===t.length)return e();var n=t;return t=[],Promise.all(n).then((function(){return f(e)}))}function h(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l("check"),o.hmrM().then((function(r){if(!r)return l(y()?"ready":"idle"),null;l("prepare");var i=[];return t=[],n=[],Promise.all(Object.keys(o.hmrC).reduce((function(e,t){return o.hmrC[t](r.c,r.r,r.m,e,n,i),e}),[])).then((function(){return f((function(){return e?p(e):(l("ready"),i)}))}))}))}function d(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):p(e)}function p(e){e=e||{},y();var t=n.map((function(t){return t(e)}));n=void 0;var o,i=t.map((function(e){return e.error})).filter(Boolean);if(i.length>0)return l("abort"),Promise.resolve().then((function(){throw i[0]}));l("dispose"),t.forEach((function(e){e.dispose&&e.dispose()})),l("apply");var a=function(e){o||(o=e)},u=[];return t.forEach((function(e){if(e.apply){var t=e.apply(a);if(t)for(var n=0;n<t.length;n++)u.push(t[n])}})),o?(l("fail"),Promise.resolve().then((function(){throw o}))):r?p(e).then((function(e){return u.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):(l("idle"),Promise.resolve(u))}function y(){if(r)return n||(n=[]),Object.keys(o.hmrI).forEach((function(e){r.forEach((function(t){o.hmrI[e](t,n)}))})),r=void 0,!0}o.hmrD=i,o.i.push((function(p){var y,v,m,w=p.module,b=function(n,r){var o=a[r];if(!o)return n;var i=function(t){if(o.hot.active){if(a[t]){var i=a[t].parents;-1===i.indexOf(r)&&i.push(r)}else u=[r],e=t;-1===o.children.indexOf(t)&&o.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+r),u=[];return n(t)},s=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&"e"!==h&&Object.defineProperty(i,h,s(h));return i.e=function(e){return function(e){switch(c){case"ready":return l("prepare"),t.push(e),f((function(){l("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(n.e(e))},i}(p.require,p.id);w.hot=(y=p.id,v=w,m={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==y,_requireSelf:function(){u=v.parents.slice(),e=y,o(y)},active:!0,accept:function(e,t,n){if(void 0===e)m._selfAccepted=!0;else if("function"==typeof e)m._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)m._acceptedDependencies[e[r]]=t||function(){},m._acceptedErrorHandlers[e[r]]=n;else m._acceptedDependencies[e]=t||function(){},m._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)m._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)m._declinedDependencies[e[t]]=!0;else m._declinedDependencies[e]=!0},dispose:function(e){m._disposeHandlers.push(e)},addDisposeHandler:function(e){m._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=m._disposeHandlers.indexOf(e);t>=0&&m._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":n=[],Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](y,n)})),l("ready");break;case"ready":Object.keys(o.hmrI).forEach((function(e){o.hmrI[e](y,n)}));break;case"prepare":case"check":case"dispose":case"apply":(r=r||[]).push(y)}},check:h,apply:d,status:function(e){if(!e)return c;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:i[y]},e=void 0,m),w.parents=u,w.children=[],u=[],p.require=b})),o.hmrC={},o.hmrI={}}(),o.p="",function(){var e,t,n,r,i={826:0},a={};function u(e){return new Promise((function(t,n){a[e]=t;var r=o.p+o.hu(e),i=new Error;o.l(r,(function(t){if(a[e]){a[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+r+": "+o+")",i.name="ChunkLoadError",i.type=r,i.request=o,n(i)}}))}))}function s(a){function u(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),a=i.id,u=i.chain,c=o.c[a];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:u,moduleId:a};if(c.hot._main)return{type:"unaccepted",chain:u,moduleId:a};for(var l=0;l<c.parents.length;l++){var f=c.parents[l],h=o.c[f];if(h){if(h.hot._declinedDependencies[a])return{type:"declined",chain:u.concat([f]),moduleId:a,parentId:f};-1===t.indexOf(f)&&(h.hot._acceptedDependencies[a]?(n[f]||(n[f]=[]),s(n[f],[a])):(delete n[f],t.push(f),r.push({chain:u.concat([f]),id:f})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}o.f&&delete o.f.jsonpHmr,e=void 0;var c={},l=[],f={},h=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var d in t)if(o.o(t,d)){var p,y=t[d],v=!1,m=!1,w=!1,b="";switch((p=y?u(d):{type:"disposed",moduleId:d}).chain&&(b="\nUpdate propagation: "+p.chain.join(" -> ")),p.type){case"self-declined":a.onDeclined&&a.onDeclined(p),a.ignoreDeclined||(v=new Error("Aborted because of self decline: "+p.moduleId+b));break;case"declined":a.onDeclined&&a.onDeclined(p),a.ignoreDeclined||(v=new Error("Aborted because of declined dependency: "+p.moduleId+" in "+p.parentId+b));break;case"unaccepted":a.onUnaccepted&&a.onUnaccepted(p),a.ignoreUnaccepted||(v=new Error("Aborted because "+d+" is not accepted"+b));break;case"accepted":a.onAccepted&&a.onAccepted(p),m=!0;break;case"disposed":a.onDisposed&&a.onDisposed(p),w=!0;break;default:throw new Error("Unexception type "+p.type)}if(v)return{error:v};if(m)for(d in f[d]=y,s(l,p.outdatedModules),p.outdatedDependencies)o.o(p.outdatedDependencies,d)&&(c[d]||(c[d]=[]),s(c[d],p.outdatedDependencies[d]));w&&(s(l,[p.moduleId]),f[d]=h)}t=void 0;for(var g,x=[],k=0;k<l.length;k++){var O=l[k],_=o.c[O];_&&_.hot._selfAccepted&&f[O]!==h&&!_.hot._selfInvalidated&&x.push({module:O,require:_.hot._requireSelf,errorHandler:_.hot._selfAccepted})}return{dispose:function(){var e;n.forEach((function(e){delete i[e]})),n=void 0;for(var t,r=l.slice();r.length>0;){var a=r.pop(),u=o.c[a];if(u){var s={},f=u.hot._disposeHandlers;for(k=0;k<f.length;k++)f[k].call(null,s);for(o.hmrD[a]=s,u.hot.active=!1,delete o.c[a],delete c[a],k=0;k<u.children.length;k++){var h=o.c[u.children[k]];h&&(e=h.parents.indexOf(a))>=0&&h.parents.splice(e,1)}}}for(var d in c)if(o.o(c,d)&&(u=o.c[d]))for(g=c[d],k=0;k<g.length;k++)t=g[k],(e=u.children.indexOf(t))>=0&&u.children.splice(e,1)},apply:function(e){for(var t in f)o.o(f,t)&&(o.m[t]=f[t]);for(var n=0;n<r.length;n++)r[n](o);for(var i in c)if(o.o(c,i)){var u=o.c[i];if(u){g=c[i];for(var s=[],h=[],d=[],p=0;p<g.length;p++){var y=g[p],v=u.hot._acceptedDependencies[y],m=u.hot._acceptedErrorHandlers[y];if(v){if(-1!==s.indexOf(v))continue;s.push(v),h.push(m),d.push(y)}}for(var w=0;w<s.length;w++)try{s[w].call(null,g)}catch(t){if("function"==typeof h[w])try{h[w](t,{moduleId:i,dependencyId:d[w]})}catch(n){a.onErrored&&a.onErrored({type:"accept-error-handler-errored",moduleId:i,dependencyId:d[w],error:n,originalError:t}),a.ignoreErrored||(e(n),e(t))}else a.onErrored&&a.onErrored({type:"accept-errored",moduleId:i,dependencyId:d[w],error:t}),a.ignoreErrored||e(t)}}}for(var b=0;b<x.length;b++){var k=x[b],O=k.module;try{k.require(O)}catch(t){if("function"==typeof k.errorHandler)try{k.errorHandler(t,{moduleId:O,module:o.c[O]})}catch(n){a.onErrored&&a.onErrored({type:"self-accept-error-handler-errored",moduleId:O,error:n,originalError:t}),a.ignoreErrored||(e(n),e(t))}else a.onErrored&&a.onErrored({type:"self-accept-errored",moduleId:O,error:t}),a.ignoreErrored||e(t)}}return l}}}self.webpackHotUpdaterandom_race=function(e,n,i){for(var u in n)o.o(n,u)&&(t[u]=n[u]);i&&r.push(i),a[e]&&(a[e](),a[e]=void 0)},o.hmrI.jsonp=function(e,i){t||(t={},r=[],n=[],i.push(s)),o.o(t,e)||(t[e]=o.m[e])},o.hmrC.jsonp=function(a,c,l,f,h,d){h.push(s),e={},n=c,t=l.reduce((function(e,t){return e[t]=!1,e}),{}),r=[],a.forEach((function(t){o.o(i,t)&&void 0!==i[t]&&(f.push(u(t)),e[t]=!0)})),o.f&&(o.f.jsonpHmr=function(t,n){e&&!o.o(e,t)&&o.o(i,t)&&void 0!==i[t]&&(n.push(u(t)),e[t]=!0)})},o.hmrM=function(){if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(o.p+o.hmrF()).then((function(e){if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))}}(),o(4471)}();