!function(){var e,t,n,r,i={4264:function(e,t,n){e.exports=n(7588)},8446:function(e,t){"use strict";var n=window.document,r=new(function(){function e(){this.isEnabled=!1,this.elementProperty="",this.requestMethod="",this.exitMethod="",this.changeEvent="",this.errorEvent=""}return Object.defineProperty(e.prototype,"isFullscreen",{get:function(){return Boolean(this.element)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return n[this.elementProperty]},enumerable:!1,configurable:!0}),e.prototype.request=function(e){return!!(e=void 0===e?n.documentElement:e)[this.requestMethod]&&(e[this.requestMethod](),!0)},e.prototype.exit=function(){return!!n[this.exitMethod]&&(n[this.exitMethod](),!0)},e.prototype.onChange=function(e){return!!this.isEnabled&&(n.addEventListener(this.changeEvent,e,!1),!0)},e.prototype.onError=function(e){return!!this.isEnabled&&(n.addEventListener(this.errorEvent,e,!1),!0)},e.prototype.toggle=function(e){return void 0===e&&(e=n.documentElement),this.isFullscreen?this.exit():this.request(e)},e}());n.fullscreenEnabled?(r.isEnabled=n.fullscreenEnabled,r.elementProperty="fullscreenElement",r.requestMethod="requestFullscreen",r.exitMethod="exitFullscreen",r.changeEvent="fullscreenchange",r.errorEvent="fullscreenerror"):n.webkitFullscreenEnabled||n.webkitCancelFullScreen?(r.isEnabled=n.fullscreenEnabled||Boolean(n.webkitCancelFullScreen),r.requestMethod="webkitRequestFullScreen",r.changeEvent="webkitfullscreenchange",r.errorEvent="webkitfullscreenerror",n.webkitFullscreenEnabled?(r.elementProperty="webkitFullscreenElement",r.exitMethod="webkitExitFullscreen"):(r.elementProperty="webkitCurrentFullScreenElement",r.exitMethod="webkitCancelFullScreen")):n.msFullscreenEnabled?(r.isEnabled=n.msFullscreenEnabled,r.elementProperty="msFullscreenElement",r.requestMethod="msRequestFullscreen",r.exitMethod="msExitFullscreen",r.changeEvent="MSFullscreenChange",r.errorEvent="MSFullscreenError"):n.mozFullScreenEnabled&&(r.isEnabled=n.mozFullScreenEnabled,r.elementProperty="mozFullScreenElement",r.requestMethod="mozRequestFullScreen",r.exitMethod="mozCancelFullScreen",r.changeEvent="mozfullscreenchange",r.errorEvent="mozfullscreenerror"),t.Z=r},7588:function(e){var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,i="function"==typeof Symbol?Symbol:{},o=i.iterator||"@@iterator",a=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(e){s=function(e,t,n){return e[t]=n}}function c(e,t,n,r){var i=t&&t.prototype instanceof y?t:y,o=Object.create(i.prototype),a=new C(r||[]);return o._invoke=function(e,t,n){var r=h;return function(i,o){if(r===d)throw new Error("Generator is already running");if(r===p){if("throw"===i)throw o;return M()}for(n.method=i,n.arg=o;;){var a=n.delegate;if(a){var u=_(a,n);if(u){if(u===v)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===h)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=d;var s=l(e,t,n);if("normal"===s.type){if(r=n.done?p:f,s.arg===v)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r=p,n.method="throw",n.arg=s.arg)}}}(e,n,a),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",p="completed",v={};function y(){}function m(){}function g(){}var w={};w[o]=function(){return this};var b=Object.getPrototypeOf,x=b&&b(b(B([])));x&&x!==n&&r.call(x,o)&&(w=x);var k=g.prototype=y.prototype=Object.create(w);function E(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function O(e,t){function n(i,o,a,u){var s=l(e[i],e,o);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?t.resolve(h.__await).then((function(e){n("next",e,a,u)}),(function(e){n("throw",e,a,u)})):t.resolve(h).then((function(e){c.value=e,a(c)}),(function(e){return n("throw",e,a,u)}))}u(s.arg)}var i;this._invoke=function(e,r){function o(){return new t((function(t,i){n(e,r,t,i)}))}return i=i?i.then(o,o):o()}}function _(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,_(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var i=l(r,e.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,v;var o=i.arg;return o?o.done?(n[e.resultName]=o.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):o:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function R(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function C(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function B(e){if(e){var n=e[o];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,a=function n(){for(;++i<e.length;)if(r.call(e,i))return n.value=e[i],n.done=!1,n;return n.value=t,n.done=!0,n};return a.next=a}}return{next:M}}function M(){return{value:t,done:!0}}return m.prototype=k.constructor=g,g.constructor=m,m.displayName=s(g,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},e.awrap=function(e){return{__await:e}},E(O.prototype),O.prototype[a]=function(){return this},e.AsyncIterator=O,e.async=function(t,n,r,i,o){void 0===o&&(o=Promise);var a=new O(c(t,n,r,i),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},E(k),s(k,u,"Generator"),k[o]=function(){return this},k.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=B,C.prototype={constructor:C,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(R),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function i(r,i){return u.type="throw",u.arg=e,n.next=r,i&&(n.method="next",n.arg=t),!!i}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],u=a.completion;if("root"===a.tryLoc)return i("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return i(a.catchLoc,!0);if(this.prev<a.finallyLoc)return i(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return i(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return i(a.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&r.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var o=i;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),R(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;R(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:B(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}},8625:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){i=!0,o=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw o}}return n}}(e,t)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t,n,r,i,o,a){try{var u=e[o](a),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,i)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function u(e){o(a,r,i,u,s,"next",e)}function s(e){o(a,r,i,u,s,"throw",e)}u(void 0)}))}}var u=n(4264),s=n.n(u);function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t,n){return t&&l(e.prototype,t),n&&l(e,n),e}var f=function(){function e(t,n){c(this,e),this.data=t,this.setImage(n)}return h(e,[{key:"setImage",value:function(e){return e instanceof HTMLImageElement?this.image=e:"string"==typeof e?(this.image=new Image,this.image.src=e):this.image=null,this}},{key:"draw",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.image&&this.image.complete&&0!==this.image.naturalHeight){var r=d.from(t);e.save(),e.translate(r.x,r.y),e.drawImage(this.image,this.sx,this.sy,this.sw,this.sh,this.mx*n,this.my*n,this.sw*n,this.sh*n),e.restore()}}},{key:"sw",get:function(){return this.data.sw}},{key:"sh",get:function(){return this.data.sh}},{key:"sx",get:function(){return this.data.sx}},{key:"sy",get:function(){return this.data.sy}},{key:"tx",get:function(){return this.data.tx}},{key:"ty",get:function(){return this.data.ty}},{key:"ow",get:function(){return this.data.ow}},{key:"oh",get:function(){return this.data.oh}},{key:"px",get:function(){return this.data.px}},{key:"py",get:function(){return this.data.py}},{key:"mx",get:function(){return this.data.tx-this.data.px}},{key:"my",get:function(){return this.data.ty-this.data.py}}]),e}(),d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;c(this,e),this.x=t,this.y=n}return h(e,[{key:"set",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return new e(null!=t?t:this.x,null!=n?n:this.y)}},{key:"add",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x+r.x,this.y+r.y)}},{key:"subtract",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x-r.x,this.y-r.y)}},{key:"multiply",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x*r.x,this.y*r.y)}},{key:"divide",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x/r.x,this.y/r.y)}},{key:"mod",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return new e(this.x%r.x,this.y%r.y)}},{key:"ceil",value:function(){return new e(Math.ceil(this.x),Math.ceil(this.y))}},{key:"floor",value:function(){return new e(Math.floor(this.x),Math.floor(this.y))}},{key:"round",value:function(){return new e(Math.fround(this.x),Math.fround(this.y))}},{key:"abs",value:function(){return new e(Math.abs(this.x),Math.abs(this.y))}},{key:"reverse",value:function(){throw new e(-this.x,-this.y)}},{key:"flip",value:function(){throw new e(this.y,this.x)}},{key:"clone",value:function(){return new e(this.x,this.y)}},{key:"distance",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return Math.sqrt(this.distanceSquared(r))}},{key:"distanceSquared",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=e.from(t,n);return Math.pow(this.x-r.x,2)+Math.pow(this.y-r.y,2)}}],[{key:"from",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return"number"==typeof t?new e(t,"number"==typeof n?n:t):t instanceof e?t:t instanceof HTMLCanvasElement||t instanceof HTMLImageElement?new e(t.width,t.height):t instanceof f?new e(t.sw,t.sh):new e(t.x,t.y)}}]),e}(),p=function(e,t,n,r,i){return new d(t,n).subtract(e.offsetLeft,e.offsetTop).multiply(r/e.offsetWidth,i/e.offsetHeight)},v=n(8446),y=function(){function e(t){var n=this;c(this,e),this.activities=[],this.canvas=t,this.mouseVec=new d,this.elapsedSecs=0,this.lastUpdate=-1,this.resizingCanvas(),this.canvas.onclick=function(e){if(0===e.button){var t=p(n.canvas,e.pageX,e.pageY,n.canvas.width,n.canvas.height);n.activities.slice().reverse().some((function(e){return e.mouseClick(t,t.add(e.camera))}))}},this.canvas.onmousemove=function(e){n.mouseVec=p(n.canvas,e.pageX,e.pageY,n.canvas.width,n.canvas.height)},window.addEventListener("resize",this.resizingCanvas.bind(this)),window.addEventListener("orientationchange",this.resizingCanvas.bind(this)),v.Z.isEnabled&&window.screen&&screen.orientation&&screen.orientation.lock&&v.Z.onChange(a(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(v.Z.isFullscreen&&!(window.innerWidth>window.innerHeight)){e.next=2;break}return e.abrupt("return");case 2:if("portrait-primary"===(t=screen.orientation.type)||"portrait-secondary"===t){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,screen.orientation.lock("landscape");case 7:case"end":return e.stop()}}),e)}))))}return h(e,[{key:"ctx",get:function(){var e=this.canvas.getContext("2d");if(!e)throw"Can't get context from canvas";return e.imageSmoothingEnabled=!1,e.mozImageSmoothingEnabled=!1,e.oImageSmoothingEnabled=!1,e.webkitImageSmoothingEnabled=!1,e.msImageSmoothingEnabled=!1,e}},{key:"update",value:function(){var e,t=this,n=Date.now();if(-1!==this.lastUpdate){var r=-1===this.lastUpdate?0:n-this.lastUpdate;this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.activities=this.activities.filter((function(e){return!e.isDestroyed&&(e.update(r),e.render(t.ctx),!0)}))}this.lastUpdate=n,this.activities.slice().reverse().some((function(e){return e.mouseHover(t.mouseVec,t.mouseVec.add(e.camera))})),e=this.update.bind(this),window.requestAnimationFrame(e)||window.webkitRequestAnimationFrame(e)||window.msRequestAnimationFrame(e)||window.mozRequestAnimationFrame(e)||window.setTimeout(e,1e3/60)}},{key:"addActivity",value:function(e){this.activities.push(e)}},{key:"resizingCanvas",value:function(){var e=this.canvas.width;if(this.canvas.width=Math.min(2520,Math.max(1920,window.innerWidth/window.innerHeight*1080)),this.canvas.height=1080,e!==this.canvas.width){var t=e/this.canvas.width;this.mouseVec.multiply(t,1),this.activities.forEach((function(e){return e.relocation(t)}))}}}]),e}();function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(){function e(){c(this,e),this._hidden=!1,this._absolute=!1,this._scale=1,this._rotate=0,this._hue=0,this._brightness=1,this._contrast=1,this._grayscale=!1,this._drawBox=null}return h(e,[{key:"hidden",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._hidden=e,this}},{key:"absolute",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._absolute=e,this}},{key:"scale",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._scale=e,this}},{key:"rotate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._rotate=e,this}},{key:"hue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._hue=e,this}},{key:"brightness",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._brightness=e,this}},{key:"contrast",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this._contrast=e,this}},{key:"grayscale",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return this._grayscale=e,this}},{key:"drawBox",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._drawBox=e,this}},{key:"applyFilter",value:function(e){var t="none"===e.filter?"":e.filter;0!==this._rotate&&e.rotate(-this._rotate),0!==this._hue&&(t+=" hue-rotate(".concat(this._hue,"deg) ")),1!==this._brightness&&(t+=" brightness(".concat(this._brightness,") ")),1!==this._contrast&&(t+=" contrast(".concat(this._contrast,") ")),this._grayscale&&(t+=" grayscale(1) "),this._drawBox&&(e.rect(this._drawBox.minX,this._drawBox.minY,this._drawBox.maxX,this._drawBox.maxY),e.clip(),e.clearRect(this._drawBox.minX,this._drawBox.minY,this._drawBox.maxX,this._drawBox.maxY)),e.filter=t}}]),e}(),E=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new k;c(this,e),this.children=[],this.renderOption=null!=t?t:new k,this.isDestroyed=!1,this.hoverOutDelay=0,this.onUpdate=function(){},this.onRender=function(){},this.onDestroy=function(){},this.onMouseClick=function(){return!1},this.onMouseHover=function(){return!1},this.onMouseHoverOut=function(){},this.init()}return h(e,[{key:"init",value:function(){}},{key:"update",value:function(e){this.children=this.children.filter((function(t){return!t.isDestroyed&&(t.update(e),!0)})),this.hoverOutDelay>0&&(this.hoverOutDelay-=e,this.hoverOutDelay<=0&&(this.hoverOutDelay=0,this.onMouseHoverOut(this))),this.onUpdate(e,this)}},{key:"render",value:function(e){if(!this.isDestroyed&&!this.isHidden()){if(e.save(),this.renderOption.applyFilter(e),this.children.forEach((function(t){e.save(),t.render(e),e.restore()})),this.onRender(e,this),new URLSearchParams(window.location.search).get("renderBoundingBox")){var t=this.getBoundingBox();t&&(e.beginPath(),e.moveTo(t.minX,t.minY),e.lineTo(t.minX,t.maxY),e.lineTo(t.maxX,t.maxY),e.lineTo(t.maxX,t.minY),e.closePath(),e.stroke())}e.restore()}}},{key:"mouseClick",value:function(e,t){if(this.isDestroyed)return!1;var n=this.getBoundingBox();return!(n&&!n.isInside(this.isAbsolute()?e:t))&&(this.onMouseClick(e,t,this)||-1!==this.children.slice().reverse().findIndex((function(n){return n.mouseClick(e,t)})))}},{key:"mouseHover",value:function(e,t){if(this.isDestroyed)return!1;var n=this.getBoundingBox();return!(!n||!n.isInside(this.isAbsolute()?e:t))&&(this.hoverOutDelay=20,this.onMouseHover(e,t,this)||-1!==this.children.slice().reverse().findIndex((function(n){return n.mouseHover(e,t)})))}},{key:"destroy",value:function(){this.isDestroyed=!0,this.onDestroy(this)}},{key:"setOnUpdate",value:function(e){return this.onUpdate=e,this}},{key:"setOnRender",value:function(e){return this.onRender=e,this}},{key:"setOnMouseClick",value:function(e){return this.onMouseClick=e,this}},{key:"setOnMouseHover",value:function(e){return this.onMouseHover=e,this}},{key:"setOnMouseHoverOut",value:function(e){return this.onMouseHoverOut=e,this}},{key:"setRenderOption",value:function(e){return this.renderOption=e,this}},{key:"isAbsolute",value:function(){return this.renderOption._absolute}},{key:"isHidden",value:function(){return this.renderOption._hidden}},{key:"isHover",value:function(){return this.hoverOutDelay>0}},{key:"getScale",value:function(){return this.renderOption._scale}},{key:"getDrawBox",value:function(){return this.renderOption._drawBox}},{key:"getBoundingBox",value:function(){return null}}]),e}(),O=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new d,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new d;if(c(this,e),this.min=d.from(t),this.max=d.from(n),this.min.x>this.max.x){var r=[this.max.x,this.min.x];this.min.x=r[0],this.max.x=r[1]}if(this.min.y>this.max.y){var i=[this.max.y,this.min.y];this.min.y=i[0],this.max.y=i[1]}}return h(e,[{key:"minX",get:function(){return this.min.x}},{key:"minY",get:function(){return this.min.y}},{key:"maxX",get:function(){return this.max.x}},{key:"maxY",get:function(){return this.max.y}},{key:"xLength",get:function(){return this.max.x-this.min.x}},{key:"yLength",get:function(){return this.max.y-this.min.y}},{key:"isInside",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=d.from(e,t);return this.min.x<n.x&&this.max.x>n.x&&this.min.y<n.y&&this.max.y>n.y}},{key:"add",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=d.from(t,n);return new e(this.min.add(r),this.max.add(r))}},{key:"subtract",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=d.from(t,n);return new e(this.min.subtract(r),this.max.subtract(r))}},{key:"expand",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=d.from(t,n);return new e(this.min.subtract(r),this.max.add(r))}},{key:"contract",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=d.from(t,n);return new e(this.min.add(r),this.max.subtract(r))}},{key:"ceil",value:function(){return e.from(this.min.ceil(),this.max.ceil())}},{key:"floor",value:function(){return e.from(this.min.floor(),this.max.floor())}},{key:"round",value:function(){return e.from(this.min.round(),this.max.round())}},{key:"clone",value:function(){return e.from(this.min,this.max)}}],[{key:"from",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return new e(d.from(t,r),d.from(void 0===n?t:n,void 0===i?r:i))}}]),e}();var _=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(e){var t;return c(this,i),(t=r.call(this)).app=e,t.camera=new d,t}return h(i,[{key:"relocation",value:function(e){}},{key:"addWidget",value:function(e){this.children.push(e),e.app=this.app,e.activity=this}},{key:"render",value:function(e){var t=this;this.isDestroyed||this.isHidden()||this.children.forEach((function(n){n.isAbsolute()||(e.save(),e.translate(-t.camera.x,-t.camera.y)),n.render(e),n.isAbsolute()||e.restore()}))}},{key:"getBoundingBox",value:function(){return O.from(0,this.app.canvas)}},{key:"isAbsolute",value:function(){return!0}},{key:"viewport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new d(this.vw(e),this.vh(t))}},{key:"vw",value:function(e){return this.app.canvas.width/100*e}},{key:"vh",value:function(e){return this.app.canvas.height/100*e}}]),i}(E);var S=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new k;return c(this,i),(e=r.call(this,n)).app=null,e.activity=null,e.pos=null!=t?t:new d,e}return h(i,[{key:"setPos",value:function(e){return this.pos=e,this}}]),i}(E);function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20;c(this,e),this.frames=t,this.fps=n}return h(e,[{key:"getFrame",value:function(e){var t;return null!==(t=this.frames[Math.floor(e/1e3*this.fps)])&&void 0!==t?t:null}},{key:"setFps",value:function(e){return this.fps=e,this}}]),e}();function B(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function M(e,t,n){return(M=B()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&m(i,n.prototype),i}).apply(null,arguments)}function j(e){var t="function"==typeof Map?new Map:void 0;return(j=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,r)}function r(){return M(e,arguments,x(this).constructor)}return r.prototype=Object.create(e.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),m(r,e)})(e)}var P=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(){return c(this,i),r.apply(this,arguments)}return h(i,[{key:"random",value:function(){var e=Array.from(this.values());return e[Math.floor(e.length*Math.random()<<0)]}}]),i}(j(Map)),A=function(){function e(){c(this,e),this.sprites=new P,this.animations=new P}return h(e,[{key:"getSprite",value:function(e){var t;return null!==(t=this.sprites.get(e))&&void 0!==t?t:null}},{key:"getAnimation",value:function(e){var t;return null!==(t=this.animations.get(e))&&void 0!==t?t:null}}]),e}();function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){R(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var I={pivot:[.5,1],animation_fps:{}},L=new(function(){function e(){c(this,e),this.sheets=new P,this.sheetGroups=new P}return h(e,[{key:"getSheet",value:function(e){var t;return null!==(t=this.sheets.get(e))&&void 0!==t?t:null}},{key:"setSheet",value:function(e,t){return this.sheets.set(e,t),this}},{key:"getGroup",value:function(e){var t;return null!==(t=this.sheetGroups.get(e))&&void 0!==t?t:null}},{key:"setGroup",value:function(e,t){return this.sheetGroups.set(e,t),this}},{key:"loadSheetGroup",value:function(e,t,n,r){var o=this,a=new P,u=0;return Object.entries(n).forEach((function(s){var c=i(s,2),l=c[0],h=c[1],d="".concat(e,"/").concat(l),p=I;Object.entries(r).forEach((function(e){var t=i(e,2),n=t[0],r=t[1];-1!==d.search(n)&&(p=F(F({},p),r))}));var v=new A;Object.entries(h).forEach((function(e){var n=i(e,2),r=n[0],o=n[1];o.px=o.ow*p.pivot[0],o.py=o.oh*p.pivot[1];var a=new f(o,t),u=r.match(/[_\-][\d]+$/i);if(u){var s,c,l,h=r.slice(0,r.length-u[0].length);v.animations.has(h)||(v.animations.set(h,new C),null!==(s=p)&&void 0!==s&&null!==(c=s.animation_fps)&&void 0!==c&&c.hasOwnProperty(h)&&v.animations.get(h).setFps(null===(l=p)||void 0===l?void 0:l.animation_fps[h])),v.animations.get(h).frames.push(a)}else v.sprites.set(r,a)})),a.set(l,v),o.setSheet(d,v),console.log("%c│      └────[".concat(++u,"/").concat(Object.keys(n).length,"] : ").concat(e,"/%c").concat(l),"color: gray","color: lightgray")})),this.setGroup(e,a),this}}]),e}());var H=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new k;return c(this,i),(n=r.call(this,e,o)).text=t,n}return h(i,[{key:"init",value:function(){var e=this;this.onRender=function(t){var n=L.getSheet("ui/text");if(null!==n)for(var r=e.getScale()/2,i=8*r,o=10*r,a=e.text.toUpperCase().split("\n"),u=a.length,s=0;s<u;++s)for(var c=a[s],l=c.length,h=0;h<l;++h){var f=n.getSprite(c.charCodeAt(h)+"");f&&f.draw(t,e.pos.subtract((l-2*h)*i,(u-2*s)*o).subtract(f.mx*e.getScale(),f.my*e.getScale()),e.getScale())}}}},{key:"getBoundingBox",value:function(){var e=this.text.split("\n"),t=e.reduce((function(e,t){return Math.max(e,t.length)}),0),n=d.from(t,e.length).multiply(8,10).multiply(this.getScale()/2);return O.from(this.pos).expand(n)}},{key:"setText",value:function(e){return this.text=e,this}}]),i}(S);var q=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new k;return c(this,i),(t=r.call(this,e,o)).sprite=n,t}return h(i,[{key:"init",value:function(){var e=this;this.onRender=function(t){e.sprite&&e.sprite.draw(t,e.pos,e.getScale())}}},{key:"getBoundingBox",value:function(){return this.sprite?O.from(new d,d.from(this.sprite.sw,this.sprite.sh).multiply(this.getScale())).add(this.pos.add(d.from(this.sprite.mx,this.sprite.my).multiply(this.getScale()))):null}},{key:"setSprite",value:function(e){return this.sprite=e,this}}]),i}(S);var T=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(){return c(this,i),r.apply(this,arguments)}return h(i,[{key:"init",value:function(){var e=this;this.onRender=function(t){var n;if(e.activity&&e.sprite)for(var r=(null!==(n=e.getDrawBox())&&void 0!==n?n:e.activity.getBoundingBox()).add(e.pos.mod(e.sprite)).expand(d.from(e.sprite).multiply(2)).floor(),i=r.min.x;i<r.max.x;i+=e.sprite.data.ow)for(var o=r.min.y;o<r.max.y;o+=e.sprite.data.oh)e.sprite.draw(t,new d(i,o),e.getScale())}}},{key:"getBoundingBox",value:function(){return this.getDrawBox()}},{key:"isAbsolute",value:function(){return!0}}]),i}(q);function U(e,t,n){return(U="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=x(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}var N=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new k;return c(this,i),(t=r.call(this,e,a)).sheet=n,t.animationName=o,t.repeatCount=-1,t.playRate=1,t.elapsedSecs=0,t.onAnimationEnd=function(){},t}return h(i,[{key:"init",value:function(){var e=this;this.onRender=function(t){if(e.animation){var n=e.getCurrentFrame();n&&n.draw(t,e.pos,e.getScale())}}}},{key:"update",value:function(e){this.elapsedSecs+=e*this.playRate,U(x(i.prototype),"update",this).call(this,e)}},{key:"getCurrentFrame",value:function(){var e,t;return null!==(e=this.animation)&&void 0!==e&&e.getFrame(this.elapsedSecs)||(this.elapsedSecs=0,0!==this.repeatCount?-1!==this.repeatCount&&--this.repeatCount:this.onAnimationEnd&&this.onAnimationEnd(this)),null===(t=this.animation)||void 0===t?void 0:t.getFrame(this.elapsedSecs)}},{key:"getBoundingBox",value:function(){if(!this.animation)return null;var e=this.getCurrentFrame();return e?O.from(new d,d.from(e.sw,e.sh).multiply(this.getScale())).add(this.pos.add(d.from(e.mx,e.my).multiply(this.getScale()))):null}},{key:"setSheet",value:function(e){return this.sheet=e,this}},{key:"animation",get:function(){var e;return null===(e=this.sheet)||void 0===e?void 0:e.getAnimation(this.animationName)}},{key:"setAnimationName",value:function(e){return this.animationName=e,this}},{key:"setRepeatCount",value:function(e){return this.repeatCount=e,this}},{key:"setPlayRate",value:function(e){return this.playRate=e,this}},{key:"setOnAnimationEnd",value:function(e){return this.onAnimationEnd=e,this}},{key:"reset",value:function(){return this.elapsedSecs=0,this}}]),i}(S);var G=function(e,t){return t.renderOption.scale(t.isHover()?6.5:6),!0},z=function(e){g(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=x(t);if(n){var i=x(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return b(this,e)});function i(e){var t;c(this,i),t=r.call(this,e);var n=L.getGroup("character"),o=L.getSheet("ui/background"),a=L.getSheet("ui/button"),u=L.getSheet("ui/icon");t.background=new T(null,o.sprites.random()),t.titleText=new H(null,"random race",(new k).absolute().scale(12)),t.titleCharacter=new N(null,n.random(),"run",(new k).absolute().scale(5)),t.titleCharacter.setOnAnimationEnd((function(){if("hit"===t.titleCharacter.animationName){var e=t.titleText.getBoundingBox();t.titleCharacter.setSheet(n.random()),t.titleCharacter.setAnimationName("idle").reset().setRepeatCount(4);var r=t.titleCharacter.getCurrentFrame();r&&(t.titleCharacter.pos=e.min.add(-r.data.ow*t.titleCharacter.getScale()/2,e.max.y/2),console.log(t.titleCharacter.sheet,t.titleCharacter.sheet.animations.keys()))}else"run"===t.titleCharacter.animationName?t.titleCharacter.setAnimationName("idle").reset().setRepeatCount(4):t.titleCharacter.setAnimationName("run").reset().setRepeatCount(6)})),t.startGameButton=new q(null,a.getSprite("start_game"),(new k).absolute()),t.descriptionButton=new q(null,a.getSprite("description"),(new k).absolute()),t.reloadButton=new q(null,u.getSprite("reset"),(new k).absolute()),t.fullscreenButton=null,v.Z.isEnabled&&(t.fullscreenButton=new q(t.reloadButton.pos.subtract(t.vw(7),0),u.getSprite("fullscreen_enter"),(new k).absolute()),t.fullscreenButton.setOnMouseClick((function(){return v.Z.toggle(document.body)})).setOnUpdate(G),v.Z.onChange((function(){var e;t.fullscreenButton.sprite=null!==(e=u.getSprite(v.Z.isFullscreen?"fullscreen_exit":"fullscreen_enter"))&&void 0!==e?e:null}))),t.background.setOnUpdate((function(e){return t.background.pos.x-=e/10})),t.titleCharacter.setOnMouseClick((function(e){t.titleCharacter.animation||console.log(t.titleCharacter),t.titleCharacter.playRate+=.1,t.titleCharacter.playRate>3&&(t.titleCharacter.playRate=1),t.addWidget(new H(e.add(80*Math.random()-40,0),1===t.titleCharacter.playRate?"-200":"+10",(new k).absolute()).setRenderOption((new k).scale(2).absolute().hue(360*Math.random()).brightness(6).contrast(2)).setOnUpdate((function(e,t){t instanceof H?(t.pos.y-=e/20,t.pos.y<0&&t.destroy()):t.destroy()})))})),t.startGameButton.setOnUpdate((function(e,t){return t.renderOption.scale(t.isHover()?10.5:10)||!0})),t.descriptionButton.setOnUpdate((function(e,t){return t.renderOption.scale(t.isHover()?8.5:8)||!0})),t.reloadButton.setOnMouseClick((function(){return t.background.setSprite(o.sprites.random()),t.titleCharacter.setAnimationName("hit").reset().setRepeatCount(1),!0})).setOnUpdate(G),t.runners=[];for(var s=function(e){var r=new N(t.viewport(100*Math.random(),100));r.setOnUpdate((function(e){var i,o,a=t.getBoundingBox().add(t.camera).maxX;(null!==(i=null===(o=r.getBoundingBox())||void 0===o?void 0:o.minX)&&void 0!==i?i:0)>a&&(r.pos.x=t.camera.x,r.sheet=null),r.sheet||(r.renderOption.scale(5*Math.random()+5),r.setSheet(n.random()).setAnimationName("run").reset().setRepeatCount(-1).setPlayRate(1+.3*Math.random())),r.animation instanceof C&&-1===r.repeatCount&&(r.pos.x+=e/3*r.playRate*r.getScale()/5)})).setOnMouseClick((function(){return r.animation instanceof C&&-1===r.repeatCount&&r.setAnimationName("hit").reset().setRepeatCount(0).setOnAnimationEnd((function(){r.setSheet(L.getSheet("particle/character_particle")).setAnimationName("disappearing").setRepeatCount(0).setOnAnimationEnd((function(){r.pos.x=t.camera.x,r.sheet=null}))})),!0})),t.runners[e]=r},l=0;l<30;++l)s(l);return new URLSearchParams(window.location.search).get("renderMouseClick")||t.setOnMouseClick((function(e){var n=new N(e,L.getSheet("particle/collect_particle"),"item",(new k).absolute().scale(4));return n.setRepeatCount(0).setOnAnimationEnd((function(){return n.destroy()})),t.addWidget(n),!1})),t.setOnUpdate((function(e){t.camera.x+=e/10})),t.addWidget(t.background),t.addWidget(t.titleText),t.addWidget(t.titleCharacter),t.addWidget(t.startGameButton),t.addWidget(t.descriptionButton),t.addWidget(t.reloadButton),t.fullscreenButton&&t.addWidget(t.fullscreenButton),t.runners.forEach((function(e){return t.addWidget(e)})),t.relocation(1),t}return h(i,[{key:"relocation",value:function(e){var t,n,r=this;this.titleText.pos=this.viewport(50,10);var i=this.titleText.getBoundingBox();this.titleCharacter.pos=i.min.add((null===(t=this.titleCharacter)||void 0===t||null===(n=t.getCurrentFrame())||void 0===n?void 0:n.mx)*this.titleCharacter.getScale(),i.max.y-i.min.y),this.startGameButton.pos=this.viewport(50,30),this.descriptionButton.pos=this.viewport(50,50),this.reloadButton.pos=this.viewport(95,10),this.fullscreenButton&&(this.fullscreenButton.pos=this.reloadButton.pos.subtract(this.vw(7),0)),this.runners.forEach((function(t){return t.pos.set(t.pos.x*e,r.vh(100))}))}}]),i}(_);function W(){return X.apply(this,arguments)}function X(){return(X=a(s().mark((function e(){var t,r,o,a,u,c,l,h,f,d,p,v,y;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=Object.entries({character:[n.e(494).then(n.bind(n,3406)),n.e(715).then(n.t.bind(n,3715,19)),n.e(277).then(n.t.bind(n,8277,19))],particle:[n.e(939).then(n.bind(n,5939)),n.e(948).then(n.t.bind(n,7948,19)),n.e(258).then(n.t.bind(n,1258,19))],ui:[n.e(49).then(n.bind(n,1049)),n.e(657).then(n.t.bind(n,9657,19)),n.e(106).then(n.t.bind(n,3106,19))]}),console.log("[Load sprites] start"),r=t.length,o=0;case 4:if(!(o<r)){e.next=21;break}return a=i(t[o],2),u=a[0],c=a[1],l=i(c,3),h=l[0],f=l[1],d=l[2],e.next=9,h;case 9:return p=e.sent.default,e.next=12,f;case 12:return v=e.sent.default,e.next=15,d;case 15:y=e.sent.default,console.log("%c└────[".concat(o+1,"/").concat(r,"] : %cGroup '").concat(u,"'"),"color: gray","background: dimgray"),L.loadSheetGroup(u,p,v,y);case 18:++o,e.next=4;break;case 21:console.log(L),console.log("[Load sprites] done");case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}document.addEventListener("DOMContentLoaded",a(s().mark((function e(){var t,n;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:(t=document.createElement("canvas")).id="game",document.body.appendChild(t),(n=new y(t)).addActivity(new z(n)),n.update();case 8:case"end":return e.stop()}}),e)}))))}},o={};function a(e){var t=o[e];if(void 0!==t){if(void 0!==t.error)throw t.error;return t.exports}var n=o[e]={exports:{}};try{var r={id:e,module:n,factory:i[e],require:a};a.i.forEach((function(e){e(r)})),n=r.module,r.factory.call(n.exports,n,n.exports,r.require)}catch(e){throw n.error=e,e}return n.exports}a.m=i,a.c=o,a.i=[],a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var i=Object.create(null);a.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var u=2&r&&n;"object"==typeof u&&!~e.indexOf(u);u=t(u))Object.getOwnPropertyNames(u).forEach((function(e){o[e]=function(){return n[e]}}));return o.default=function(){return n},a.d(i,o),i},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return e+".js"},a.hu=function(e){return e+"."+a.h()+".hot-update.js"},a.hmrF=function(){return"index."+a.h()+".hot-update.json"},a.h=function(){return"074bfdbadca73e11c346"},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n={},r="random-race:",a.l=function(e,t,i,o){if(n[e])n[e].push(t);else{var u,s;if(void 0!==i)for(var c=document.getElementsByTagName("script"),l=0;l<c.length;l++){var h=c[l];if(h.getAttribute("src")==e||h.getAttribute("data-webpack")==r+i){u=h;break}}u||(s=!0,(u=document.createElement("script")).charset="utf-8",u.timeout=120,a.nc&&u.setAttribute("nonce",a.nc),u.setAttribute("data-webpack",r+i),u.src=e),n[e]=[t];var f=function(t,r){u.onerror=u.onload=null,clearTimeout(d);var i=n[e];if(delete n[e],u.parentNode&&u.parentNode.removeChild(u),i&&i.forEach((function(e){return e(r)})),t)return t(r)},d=setTimeout(f.bind(null,void 0,{type:"timeout",target:u}),12e4);u.onerror=f.bind(null,u.onerror),u.onload=f.bind(null,u.onload),s&&document.head.appendChild(u)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e,t,n,r,i={},o=a.c,u=[],s=[],c="idle";function l(e){c=e;for(var t=0;t<s.length;t++)s[t].call(null,e)}function h(e){if(0===t.length)return e();var n=t;return t=[],Promise.all(n).then((function(){return h(e)}))}function f(e){if("idle"!==c)throw new Error("check() is only allowed in idle status");return l("check"),a.hmrM().then((function(r){if(!r)return l(v()?"ready":"idle"),null;l("prepare");var i=[];return t=[],n=[],Promise.all(Object.keys(a.hmrC).reduce((function(e,t){return a.hmrC[t](r.c,r.r,r.m,e,n,i),e}),[])).then((function(){return h((function(){return e?p(e):(l("ready"),i)}))}))}))}function d(e){return"ready"!==c?Promise.resolve().then((function(){throw new Error("apply() is only allowed in ready status")})):p(e)}function p(e){e=e||{},v();var t=n.map((function(t){return t(e)}));n=void 0;var i,o=t.map((function(e){return e.error})).filter(Boolean);if(o.length>0)return l("abort"),Promise.resolve().then((function(){throw o[0]}));l("dispose"),t.forEach((function(e){e.dispose&&e.dispose()})),l("apply");var a=function(e){i||(i=e)},u=[];return t.forEach((function(e){if(e.apply){var t=e.apply(a);if(t)for(var n=0;n<t.length;n++)u.push(t[n])}})),i?(l("fail"),Promise.resolve().then((function(){throw i}))):r?p(e).then((function(e){return u.forEach((function(t){e.indexOf(t)<0&&e.push(t)})),e})):(l("idle"),Promise.resolve(u))}function v(){if(r)return n||(n=[]),Object.keys(a.hmrI).forEach((function(e){r.forEach((function(t){a.hmrI[e](t,n)}))})),r=void 0,!0}a.hmrD=i,a.i.push((function(p){var v,y,m,g=p.module,w=function(n,r){var i=o[r];if(!i)return n;var a=function(t){if(i.hot.active){if(o[t]){var a=o[t].parents;-1===a.indexOf(r)&&a.push(r)}else u=[r],e=t;-1===i.children.indexOf(t)&&i.children.push(t)}else console.warn("[HMR] unexpected require("+t+") from disposed module "+r),u=[];return n(t)},s=function(e){return{configurable:!0,enumerable:!0,get:function(){return n[e]},set:function(t){n[e]=t}}};for(var f in n)Object.prototype.hasOwnProperty.call(n,f)&&"e"!==f&&Object.defineProperty(a,f,s(f));return a.e=function(e){return function(e){switch(c){case"ready":return l("prepare"),t.push(e),h((function(){l("ready")})),e;case"prepare":return t.push(e),e;default:return e}}(n.e(e))},a}(p.require,p.id);g.hot=(v=p.id,y=g,m={_acceptedDependencies:{},_acceptedErrorHandlers:{},_declinedDependencies:{},_selfAccepted:!1,_selfDeclined:!1,_selfInvalidated:!1,_disposeHandlers:[],_main:e!==v,_requireSelf:function(){u=y.parents.slice(),e=v,a(v)},active:!0,accept:function(e,t,n){if(void 0===e)m._selfAccepted=!0;else if("function"==typeof e)m._selfAccepted=e;else if("object"==typeof e&&null!==e)for(var r=0;r<e.length;r++)m._acceptedDependencies[e[r]]=t||function(){},m._acceptedErrorHandlers[e[r]]=n;else m._acceptedDependencies[e]=t||function(){},m._acceptedErrorHandlers[e]=n},decline:function(e){if(void 0===e)m._selfDeclined=!0;else if("object"==typeof e&&null!==e)for(var t=0;t<e.length;t++)m._declinedDependencies[e[t]]=!0;else m._declinedDependencies[e]=!0},dispose:function(e){m._disposeHandlers.push(e)},addDisposeHandler:function(e){m._disposeHandlers.push(e)},removeDisposeHandler:function(e){var t=m._disposeHandlers.indexOf(e);t>=0&&m._disposeHandlers.splice(t,1)},invalidate:function(){switch(this._selfInvalidated=!0,c){case"idle":n=[],Object.keys(a.hmrI).forEach((function(e){a.hmrI[e](v,n)})),l("ready");break;case"ready":Object.keys(a.hmrI).forEach((function(e){a.hmrI[e](v,n)}));break;case"prepare":case"check":case"dispose":case"apply":(r=r||[]).push(v)}},check:f,apply:d,status:function(e){if(!e)return c;s.push(e)},addStatusHandler:function(e){s.push(e)},removeStatusHandler:function(e){var t=s.indexOf(e);t>=0&&s.splice(t,1)},data:i[v]},e=void 0,m),g.parents=u,g.children=[],u=[],p.require=w})),a.hmrC={},a.hmrI={}}(),a.p="",function(){var e={826:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var i=new Promise((function(n,i){r=e[t]=[n,i]}));n.push(r[2]=i);var o=a.p+a.u(t),u=new Error;a.l(o,(function(n){if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),o=n&&n.target&&n.target.src;u.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",u.name="ChunkLoadError",u.type=i,u.request=o,r[1](u)}}),"chunk-"+t,t)}};var t,n,r,i,o={};function u(e){return new Promise((function(t,n){o[e]=t;var r=a.p+a.hu(e),i=new Error;a.l(r,(function(t){if(o[e]){o[e]=void 0;var r=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;i.message="Loading hot update chunk "+e+" failed.\n("+r+": "+a+")",i.name="ChunkLoadError",i.type=r,i.request=a,n(i)}}))}))}function s(o){function u(e){for(var t=[e],n={},r=t.map((function(e){return{chain:[e],id:e}}));r.length>0;){var i=r.pop(),o=i.id,u=i.chain,c=a.c[o];if(c&&(!c.hot._selfAccepted||c.hot._selfInvalidated)){if(c.hot._selfDeclined)return{type:"self-declined",chain:u,moduleId:o};if(c.hot._main)return{type:"unaccepted",chain:u,moduleId:o};for(var l=0;l<c.parents.length;l++){var h=c.parents[l],f=a.c[h];if(f){if(f.hot._declinedDependencies[o])return{type:"declined",chain:u.concat([h]),moduleId:o,parentId:h};-1===t.indexOf(h)&&(f.hot._acceptedDependencies[o]?(n[h]||(n[h]=[]),s(n[h],[o])):(delete n[h],t.push(h),r.push({chain:u.concat([h]),id:h})))}}}}return{type:"accepted",moduleId:e,outdatedModules:t,outdatedDependencies:n}}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];-1===e.indexOf(r)&&e.push(r)}}a.f&&delete a.f.jsonpHmr,t=void 0;var c={},l=[],h={},f=function(e){console.warn("[HMR] unexpected require("+e.id+") to disposed module")};for(var d in n)if(a.o(n,d)){var p,v=n[d],y=!1,m=!1,g=!1,w="";switch((p=v?u(d):{type:"disposed",moduleId:d}).chain&&(w="\nUpdate propagation: "+p.chain.join(" -> ")),p.type){case"self-declined":o.onDeclined&&o.onDeclined(p),o.ignoreDeclined||(y=new Error("Aborted because of self decline: "+p.moduleId+w));break;case"declined":o.onDeclined&&o.onDeclined(p),o.ignoreDeclined||(y=new Error("Aborted because of declined dependency: "+p.moduleId+" in "+p.parentId+w));break;case"unaccepted":o.onUnaccepted&&o.onUnaccepted(p),o.ignoreUnaccepted||(y=new Error("Aborted because "+d+" is not accepted"+w));break;case"accepted":o.onAccepted&&o.onAccepted(p),m=!0;break;case"disposed":o.onDisposed&&o.onDisposed(p),g=!0;break;default:throw new Error("Unexception type "+p.type)}if(y)return{error:y};if(m)for(d in h[d]=v,s(l,p.outdatedModules),p.outdatedDependencies)a.o(p.outdatedDependencies,d)&&(c[d]||(c[d]=[]),s(c[d],p.outdatedDependencies[d]));g&&(s(l,[p.moduleId]),h[d]=f)}n=void 0;for(var b,x=[],k=0;k<l.length;k++){var E=l[k],O=a.c[E];O&&O.hot._selfAccepted&&h[E]!==f&&!O.hot._selfInvalidated&&x.push({module:E,require:O.hot._requireSelf,errorHandler:O.hot._selfAccepted})}return{dispose:function(){var t;r.forEach((function(t){delete e[t]})),r=void 0;for(var n,i=l.slice();i.length>0;){var o=i.pop(),u=a.c[o];if(u){var s={},h=u.hot._disposeHandlers;for(k=0;k<h.length;k++)h[k].call(null,s);for(a.hmrD[o]=s,u.hot.active=!1,delete a.c[o],delete c[o],k=0;k<u.children.length;k++){var f=a.c[u.children[k]];f&&(t=f.parents.indexOf(o))>=0&&f.parents.splice(t,1)}}}for(var d in c)if(a.o(c,d)&&(u=a.c[d]))for(b=c[d],k=0;k<b.length;k++)n=b[k],(t=u.children.indexOf(n))>=0&&u.children.splice(t,1)},apply:function(e){for(var t in h)a.o(h,t)&&(a.m[t]=h[t]);for(var n=0;n<i.length;n++)i[n](a);for(var r in c)if(a.o(c,r)){var u=a.c[r];if(u){b=c[r];for(var s=[],f=[],d=[],p=0;p<b.length;p++){var v=b[p],y=u.hot._acceptedDependencies[v],m=u.hot._acceptedErrorHandlers[v];if(y){if(-1!==s.indexOf(y))continue;s.push(y),f.push(m),d.push(v)}}for(var g=0;g<s.length;g++)try{s[g].call(null,b)}catch(t){if("function"==typeof f[g])try{f[g](t,{moduleId:r,dependencyId:d[g]})}catch(n){o.onErrored&&o.onErrored({type:"accept-error-handler-errored",moduleId:r,dependencyId:d[g],error:n,originalError:t}),o.ignoreErrored||(e(n),e(t))}else o.onErrored&&o.onErrored({type:"accept-errored",moduleId:r,dependencyId:d[g],error:t}),o.ignoreErrored||e(t)}}}for(var w=0;w<x.length;w++){var k=x[w],E=k.module;try{k.require(E)}catch(t){if("function"==typeof k.errorHandler)try{k.errorHandler(t,{moduleId:E,module:a.c[E]})}catch(n){o.onErrored&&o.onErrored({type:"self-accept-error-handler-errored",moduleId:E,error:n,originalError:t}),o.ignoreErrored||(e(n),e(t))}else o.onErrored&&o.onErrored({type:"self-accept-errored",moduleId:E,error:t}),o.ignoreErrored||e(t)}}return l}}}self.webpackHotUpdaterandom_race=function(e,t,r){for(var u in t)a.o(t,u)&&(n[u]=t[u]);r&&i.push(r),o[e]&&(o[e](),o[e]=void 0)},a.hmrI.jsonp=function(e,t){n||(n={},i=[],r=[],t.push(s)),a.o(n,e)||(n[e]=a.m[e])},a.hmrC.jsonp=function(o,c,l,h,f,d){f.push(s),t={},r=c,n=l.reduce((function(e,t){return e[t]=!1,e}),{}),i=[],o.forEach((function(n){a.o(e,n)&&void 0!==e[n]&&(h.push(u(n)),t[n]=!0)})),a.f&&(a.f.jsonpHmr=function(n,r){t&&!a.o(t,n)&&a.o(e,n)&&void 0!==e[n]&&(r.push(u(n)),t[n]=!0)})},a.hmrM=function(){if("undefined"==typeof fetch)throw new Error("No browser support: need fetch API");return fetch(a.p+a.hmrF()).then((function(e){if(404!==e.status){if(!e.ok)throw new Error("Failed to fetch update manifest "+e.statusText);return e.json()}}))};var c=function(t,n){var r,i,o=n[0],u=n[1],s=n[2],c=0;for(r in u)a.o(u,r)&&(a.m[r]=u[r]);for(s&&s(a),t&&t(n);c<o.length;c++)i=o[c],a.o(e,i)&&e[i]&&e[i][0](),e[o[c]]=0},l=self.webpackChunkrandom_race=self.webpackChunkrandom_race||[];l.forEach(c.bind(null,0)),l.push=c.bind(null,l.push.bind(l))}(),a(8625)}();