!function(s){var e={};function t(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return s[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}t.m=s,t.c=e,t.d=function(s,e,n){t.o(s,e)||Object.defineProperty(s,e,{enumerable:!0,get:n})},t.r=function(s){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},t.t=function(s,e){if(1&e&&(s=t(s)),8&e)return s;if(4&e&&"object"==typeof s&&s&&s.__esModule)return s;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:s}),2&e&&"string"!=typeof s)for(var a in s)t.d(n,a,function(e){return s[e]}.bind(null,a));return n},t.n=function(s){var e=s&&s.__esModule?function(){return s.default}:function(){return s};return t.d(e,"a",e),e},t.o=function(s,e){return Object.prototype.hasOwnProperty.call(s,e)},t.p="",t(t.s=1)}([function(s){s.exports=JSON.parse('{"background":{"texture":"ui/background","sprites":[{"name":"blue","w":64,"h":64,"sx":0,"sy":0},{"name":"brown","w":64,"h":64,"sx":64,"sy":0},{"name":"pink","w":64,"h":64,"sx":128,"sy":0},{"name":"gray","w":64,"h":64,"sx":0,"sy":64},{"name":"green","w":64,"h":64,"sx":64,"sy":64},{"name":"purple","w":64,"h":64,"sx":128,"sy":64},{"name":"yellow","w":64,"h":64,"sx":128,"sy":0}]},"text":{"texture":"ui/text","sprites":[{"name":"a","w":8,"h":10,"sx":0,"sy":0},{"name":"b","w":8,"h":10,"sx":8,"sy":0},{"name":"c","w":8,"h":10,"sx":16,"sy":0},{"name":"d","w":8,"h":10,"sx":24,"sy":0},{"name":"e","w":8,"h":10,"sx":32,"sy":0},{"name":"f","w":8,"h":10,"sx":40,"sy":0},{"name":"g","w":8,"h":10,"sx":48,"sy":0},{"name":"h","w":8,"h":10,"sx":56,"sy":0},{"name":"i","w":8,"h":10,"sx":64,"sy":0},{"name":"j","w":8,"h":10,"sx":72,"sy":0},{"name":"k","w":8,"h":10,"sx":0,"sy":10},{"name":"l","w":8,"h":10,"sx":8,"sy":10},{"name":"m","w":8,"h":10,"sx":16,"sy":10},{"name":"n","w":8,"h":10,"sx":24,"sy":10},{"name":"o","w":8,"h":10,"sx":32,"sy":10},{"name":"p","w":8,"h":10,"sx":40,"sy":20},{"name":"q","w":8,"h":10,"sx":40,"sy":10},{"name":"r","w":8,"h":10,"sx":48,"sy":10},{"name":"s","w":8,"h":10,"sx":56,"sy":10},{"name":"t","w":8,"h":10,"sx":64,"sy":10},{"name":"u","w":8,"h":10,"sx":72,"sy":10},{"name":"v","w":8,"h":10,"sx":0,"sy":20},{"name":"w","w":8,"h":10,"sx":8,"sy":20},{"name":"x","w":8,"h":10,"sx":16,"sy":20},{"name":"y","w":8,"h":10,"sx":24,"sy":20},{"name":"z","w":8,"h":10,"sx":32,"sy":20},{"name":"0","w":8,"h":10,"sx":0,"sy":30},{"name":"1","w":8,"h":10,"sx":8,"sy":30},{"name":"2","w":8,"h":10,"sx":16,"sy":30},{"name":"3","w":8,"h":10,"sx":24,"sy":30},{"name":"4","w":8,"h":10,"sx":32,"sy":30},{"name":"5","w":8,"h":10,"sx":40,"sy":30},{"name":"6","w":8,"h":10,"sx":48,"sy":30},{"name":"7","w":8,"h":10,"sx":56,"sy":30},{"name":"8","w":8,"h":10,"sx":64,"sy":30},{"name":"9","w":8,"h":10,"sx":72,"sy":30},{"name":".","w":8,"h":10,"sx":0,"sy":40},{"name":",","w":8,"h":10,"sx":8,"sy":40},{"name":":","w":8,"h":10,"sx":16,"sy":40},{"name":"?","w":8,"h":10,"sx":24,"sy":40},{"name":"!","w":8,"h":10,"sx":32,"sy":40},{"name":"(","w":8,"h":10,"sx":40,"sy":40},{"name":")","w":8,"h":10,"sx":48,"sy":40},{"name":"+","w":8,"h":10,"sx":56,"sy":40},{"name":"-","w":8,"h":10,"sx":64,"sy":40}]},"block":{"texture":"block/terrain","sprites":[{"name":"a","w":8,"h":10,"sx":0,"sy":0},{"name":"b","w":8,"h":10,"sx":8,"sy":0},{"name":"c","w":8,"h":10,"sx":16,"sy":0},{"name":"d","w":8,"h":10,"sx":24,"sy":0},{"name":"e","w":8,"h":10,"sx":32,"sy":0},{"name":"f","w":8,"h":10,"sx":40,"sy":0},{"name":"g","w":8,"h":10,"sx":48,"sy":0},{"name":"h","w":8,"h":10,"sx":56,"sy":0},{"name":"i","w":8,"h":10,"sx":64,"sy":0},{"name":"j","w":8,"h":10,"sx":72,"sy":0},{"name":"k","w":8,"h":10,"sx":0,"sy":10},{"name":"l","w":8,"h":10,"sx":8,"sy":10},{"name":"m","w":8,"h":10,"sx":16,"sy":10},{"name":"n","w":8,"h":10,"sx":24,"sy":10},{"name":"o","w":8,"h":10,"sx":32,"sy":10},{"name":"p","w":8,"h":10,"sx":40,"sy":20},{"name":"q","w":8,"h":10,"sx":40,"sy":10},{"name":"r","w":8,"h":10,"sx":48,"sy":10},{"name":"s","w":8,"h":10,"sx":56,"sy":10},{"name":"t","w":8,"h":10,"sx":64,"sy":10},{"name":"u","w":8,"h":10,"sx":72,"sy":10},{"name":"v","w":8,"h":10,"sx":0,"sy":20},{"name":"w","w":8,"h":10,"sx":8,"sy":20},{"name":"x","w":8,"h":10,"sx":16,"sy":20},{"name":"y","w":8,"h":10,"sx":24,"sy":20},{"name":"z","w":8,"h":10,"sx":32,"sy":20},{"name":"0","w":8,"h":10,"sx":0,"sy":30},{"name":"1","w":8,"h":10,"sx":8,"sy":30},{"name":"2","w":8,"h":10,"sx":16,"sy":30},{"name":"3","w":8,"h":10,"sx":24,"sy":30},{"name":"4","w":8,"h":10,"sx":32,"sy":30},{"name":"5","w":8,"h":10,"sx":40,"sy":30},{"name":"6","w":8,"h":10,"sx":48,"sy":30},{"name":"7","w":8,"h":10,"sx":56,"sy":30},{"name":"8","w":8,"h":10,"sx":64,"sy":30},{"name":"9","w":8,"h":10,"sx":72,"sy":30},{"name":".","w":8,"h":10,"sx":0,"sy":40},{"name":",","w":8,"h":10,"sx":8,"sy":40},{"name":":","w":8,"h":10,"sx":16,"sy":40},{"name":"?","w":8,"h":10,"sx":24,"sy":40},{"name":"!","w":8,"h":10,"sx":32,"sy":40},{"name":"(","w":8,"h":10,"sx":40,"sy":40},{"name":")","w":8,"h":10,"sx":48,"sy":40},{"name":"+","w":8,"h":10,"sx":56,"sy":40},{"name":"-","w":8,"h":10,"sx":64,"sy":40}]}}')},function(s,e,t){"use strict";t.r(e);var n=class{constructor(s){this.activities=[],this.canvas=s,this.ctx=this.canvas.getContext("2d"),this.elapsedSecs=0,this.lastUpdate=-1,this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.mozImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1}update(){const s=Date.now();if(-1!==this.lastUpdate){const e=-1===this.lastUpdate?0:s-this.lastUpdate;this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.activities.forEach(s=>{s.update(e),s.render(this.ctx)})}this.lastUpdate=s,requestAnimationFrame(this.update.bind(this))}addActivity(s){this.activities.push(s),s.app=this}};class a{constructor(){this._hidden=!1,this._absolute=!1,this._scale=1,this._rotate=0,this._hue=0,this._brightness=1,this._contrast=1,this._grayscale=!1}hidden(s=!0){return this._hidden=s,this}static hidden(s=!0){return(new a).hidden(s)}absolute(s=!0){return this._absolute=s,this}static absolute(s=!0){return(new a).absolute(s)}scale(s=1){return this._scale=s,this}static scale(s=1){return(new a).scale(s)}rotate(s=0){return this._rotate=s,this}static rotate(s=0){return(new a).rotate(s)}hue(s=0){return this._hue=s,this}static hue(s=0){return(new a).hue(s)}brightness(s=1){return this._brightness=s,this}static brightness(s=1){return(new a).brightness(s)}contrast(s=1){return this._contrast=s,this}static contrast(s=1){return(new a).contrast(s)}grayscale(s=!0){return this._grayscale=s,this}static grayscale(s=!0){return(new a).grayscale(s)}applyFilter(s){0!==this._rotate&&s.rotate(-this._rotate),0!==this._hue&&(s.filter+=` hue-rotate(${this._hue}deg) `),1!==this._brightness&&(s.filter+=` brightness(${this._brightness}) `),1!==this._contrast&&(s.filter+=` brightness(${this._contrast}) `),this._grayscale&&(s.filter+=" grayscale(1) ")}}var i=a;var r=class{constructor(s=null){this.children=[],this.renderOption=s||new i}update(s){this.children.forEach(e=>{e.update(s)})}render(s){this.children.forEach(e=>{e.render(s)})}destroy(){}};var h=class{constructor(s=0,e=0){this.x=s,this.y=e}};var o=class extends r{constructor(){super(),this.app=null,this.hidden=!1,this.camera=new h(0,0)}addWidget(s){this.children.push(s),s.app=this.app,s.activity=this}render(s){this.hidden||(s.save(),s.translate(-this.camera.x,-this.camera.y),this.children.forEach(e=>{e.renderOption._absolute||e.render(s)}),s.restore(),this.children.forEach(e=>{e.renderOption._absolute&&e.render(s)}))}};var m=class extends r{constructor(s=null,e=null){super(e),this.app=null,this.activity=null,this.pos=s||new h(0,0)}};class c{constructor(s,e,t,n,a=0,i=0){this.image=null,this.w=s,this.h=e,this.sx=t,this.sy=n,this.ox=a,this.oy=i}draw(s,e,t,n=null){if(null!==this.image){if(null===n)n=new i;else if(n._hidden)return;s.save(),n.applyFilter(s),s.translate(e,t),s.drawImage(this.image,this.sx,this.sy,this.w,this.h,-this.ox*n._scale,-this.oy*n._scale,this.w*n._scale,this.h*n._scale),s.restore()}}static fromJson({w:s,h:e,sx:t,sy:n,ox:a,oy:i}){return new c(s||0,e||0,t||0,n||0,a||0,i||0)}}var w=c;var u=class{constructor(s,e){this.image=new Image,this.image.src=s,this.sprites=[],this.names=[],e.forEach(s=>{const e=w.fromJson(s);e.image=this.image;const t=this.sprites.length;this.sprites[t]=e,s.hasOwnProperty("name")&&(this.names[t]=s.name.toLowerCase())})}get(s){return this.sprites[this.names.indexOf(s.toLowerCase())]||null}random(){return this.sprites[Math.floor(Math.random()*this.sprites.length)]||null}},y=t(0);const l=new u("./assets/sprite/"+y.text.texture+".png",y.text.sprites),x=new u("./assets/sprite/"+y.background.texture+".png",y.background.sprites);var d=class extends m{constructor(s,e,t=null){super(s,t),this.text=e}render(s){const e=this.renderOption._scale,t=this.text.split("\n"),n=t.length;for(let a=0;a<n;++a){const i=t[a],r=i.length;for(let t=0;t<r;++t){const h=l.get(i.charAt(t));null!==h&&h.draw(s,this.pos.x-8*e*r/2+t*e*8,this.pos.y-10*e*n/2+a*e*10,this.renderOption)}}super.render(s)}};var p=class extends m{constructor(s,e,t=null){super(e,t),this.sprite=s}render(s){const e=new h(-this.sprite.w-(this.pos.x+this.activity.camera.x)%this.sprite.w-this.sprite.h-(this.pos.y+this.activity.camera.y)%this.sprite.h),t=new h(540+this.sprite.w,540+this.sprite.h);this.renderOption._absolute||(e.x+=this.activity.camera.x,e.y+=this.activity.camera.y,t.x+=this.activity.camera.x,t.y+=this.activity.camera.y);for(let n=e.x;n<t.x;n+=this.sprite.w)for(let a=e.y;a<t.y;a+=this.sprite.h)this.sprite.draw(s,n,a,this.renderOption);super.render(s)}};var g=class extends o{constructor(){super(),this.addWidget(new p(x.random())),this.addWidget(new d(new h(270,40),"random race",i.scale(3).absolute(!0)))}update(s){this.camera.x+=s/10,super.update(s)}};var f=new class{constructor(){this.images=[],this.names=[]}put(s,e){const t=this.images.length;return this.images[t]=new Image,this.images[t].src=e,this.names[t]=s.toLowerCase(),this}get(s){return this.images[this.names.indexOf(s.toLowerCase())]||null}random(){return this.get(Math.floor(Math.random()*this.images.length))}};Array.prototype.last=function(){return this.length>0?this[this.length-1]:null},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||(s=>window.setTimeout(s,1e3/60)),Date.now=Date.now||(()=>(new Date).getTime()),f.put("ui/text","./assets/sprite/ui/text.png"),f.put("ui/background","./assets/sprite/ui/background.png"),document.addEventListener("DOMContentLoaded",()=>{const s=new n(document.getElementById("game"));s.addActivity(new g),s.update()})}]);