!function(t){var s={};function e(n){if(s[n])return s[n].exports;var i=s[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=s,e.d=function(t,s,n){e.o(t,s)||Object.defineProperty(t,s,{enumerable:!0,get:n})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,s){if(1&s&&(t=e(t)),8&s)return t;if(4&s&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(e.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&s&&"string"!=typeof t)for(var i in t)e.d(n,i,function(s){return t[s]}.bind(null,i));return n},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},e.p="",e(e.s=1)}([function(t){t.exports=JSON.parse('{"a":{"texture":"./assets/sprite/ui/background.png","sprites":[{"name":"blue","w":64,"h":64,"sx":0,"sy":0},{"name":"brown","w":64,"h":64,"sx":64,"sy":0},{"name":"pink","w":64,"h":64,"sx":128,"sy":0},{"name":"gray","w":64,"h":64,"sx":0,"sy":64},{"name":"green","w":64,"h":64,"sx":64,"sy":64},{"name":"purple","w":64,"h":64,"sx":128,"sy":64},{"name":"yellow","w":64,"h":64,"sx":128,"sy":0}]},"b":{"texture":"./assets/sprite/ui/text.png","sprites":[{"name":"a","w":8,"h":10,"sx":0,"sy":0},{"name":"b","w":8,"h":10,"sx":8,"sy":0},{"name":"c","w":8,"h":10,"sx":16,"sy":0},{"name":"d","w":8,"h":10,"sx":24,"sy":0},{"name":"e","w":8,"h":10,"sx":32,"sy":0},{"name":"f","w":8,"h":10,"sx":40,"sy":0},{"name":"g","w":8,"h":10,"sx":48,"sy":0},{"name":"h","w":8,"h":10,"sx":56,"sy":0},{"name":"i","w":8,"h":10,"sx":64,"sy":0},{"name":"j","w":8,"h":10,"sx":72,"sy":0},{"name":"k","w":8,"h":10,"sx":0,"sy":10},{"name":"l","w":8,"h":10,"sx":8,"sy":10},{"name":"m","w":8,"h":10,"sx":16,"sy":10},{"name":"n","w":8,"h":10,"sx":24,"sy":10},{"name":"o","w":8,"h":10,"sx":32,"sy":10},{"name":"p","w":8,"h":10,"sx":40,"sy":20},{"name":"q","w":8,"h":10,"sx":40,"sy":10},{"name":"r","w":8,"h":10,"sx":48,"sy":10},{"name":"s","w":8,"h":10,"sx":56,"sy":10},{"name":"t","w":8,"h":10,"sx":64,"sy":10},{"name":"u","w":8,"h":10,"sx":72,"sy":10},{"name":"v","w":8,"h":10,"sx":0,"sy":20},{"name":"w","w":8,"h":10,"sx":8,"sy":20},{"name":"x","w":8,"h":10,"sx":16,"sy":20},{"name":"y","w":8,"h":10,"sx":24,"sy":20},{"name":"z","w":8,"h":10,"sx":32,"sy":20},{"name":"0","w":8,"h":10,"sx":0,"sy":30},{"name":"1","w":8,"h":10,"sx":8,"sy":30},{"name":"2","w":8,"h":10,"sx":16,"sy":30},{"name":"3","w":8,"h":10,"sx":24,"sy":30},{"name":"4","w":8,"h":10,"sx":32,"sy":30},{"name":"5","w":8,"h":10,"sx":40,"sy":30},{"name":"6","w":8,"h":10,"sx":48,"sy":30},{"name":"7","w":8,"h":10,"sx":56,"sy":30},{"name":"8","w":8,"h":10,"sx":64,"sy":30},{"name":"9","w":8,"h":10,"sx":72,"sy":30},{"name":".","w":8,"h":10,"sx":0,"sy":40},{"name":",","w":8,"h":10,"sx":8,"sy":40},{"name":":","w":8,"h":10,"sx":16,"sy":40},{"name":"?","w":8,"h":10,"sx":24,"sy":40},{"name":"!","w":8,"h":10,"sx":32,"sy":40},{"name":"(","w":8,"h":10,"sx":40,"sy":40},{"name":")","w":8,"h":10,"sx":48,"sy":40},{"name":"+","w":8,"h":10,"sx":56,"sy":40},{"name":"-","w":8,"h":10,"sx":64,"sy":40}]}}')},function(t,s,e){"use strict";e.r(s);var n=class{constructor(t){this.activities=[],this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.elapsedSecs=0,this.lastUpdate=-1,this.ctx.webkitImageSmoothingEnabled=!1,this.ctx.mozImageSmoothingEnabled=!1,this.ctx.imageSmoothingEnabled=!1}update(){const t=Date.now();if(-1!==this.lastUpdate){const s=-1===this.lastUpdate?0:t-this.lastUpdate;this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.activities.forEach(t=>{t.update(s),t.render(this.ctx)})}this.lastUpdate=t,requestAnimationFrame(this.update.bind(this))}addActivity(t){this.activities.push(t),t.app=this}};class i{constructor(){this._hidden=!1,this._absolute=!1,this._scale=1,this._rotate=0,this._hue=0,this._brightness=1,this._contrast=1,this._grayscale=!1}hidden(t=!0){return this._hidden=t,this}static hidden(t=!0){return(new i).hidden(t)}absolute(t=!0){return this._absolute=t,this}static absolute(t=!0){return(new i).absolute(t)}scale(t=1){return this._scale=t,this}static scale(t=1){return(new i).scale(t)}rotate(t=0){return this._rotate=t,this}static rotate(t=0){return(new i).rotate(t)}hue(t=0){return this._hue=t,this}static hue(t=0){return(new i).hue(t)}brightness(t=1){return this._brightness=t,this}static brightness(t=1){return(new i).brightness(t)}contrast(t=1){return this._contrast=t,this}static contrast(t=1){return(new i).contrast(t)}grayscale(t=!0){return this._grayscale=t,this}static grayscale(t=!0){return(new i).grayscale(t)}applyFilter(t){0!==this._rotate&&t.rotate(-this._rotate),0!==this._hue&&(t.filter+=` hue-rotate(${this._hue}deg) `),1!==this._brightness&&(t.filter+=` brightness(${this._brightness}) `),1!==this._contrast&&(t.filter+=` brightness(${this._contrast}) `),this._grayscale&&(t.filter+=" grayscale(1) ")}}var r=i;var a=class{constructor(t=null){this.children=[],this.renderOption=t||new r}update(t){this.children.forEach(s=>{s.update(t)})}render(t){this.children.forEach(s=>{s.render(t)})}destroy(){}};var h=class{constructor(t=0,s=0){this.x=t,this.y=s}};var o=class extends a{constructor(){super(),this.app=null,this.hidden=!1,this.camera=new h(0,0)}addWidget(t){this.children.push(t),t.app=this.app,t.activity=this}render(t){this.hidden||(t.save(),t.translate(-this.camera.x,-this.camera.y),this.children.forEach(s=>{s.renderOption._absolute||s.render(t)}),t.restore(),this.children.forEach(s=>{s.renderOption._absolute&&s.render(t)}))}};var c=class extends a{constructor(t=null,s=null){super(s),this.app=null,this.activity=null,this.pos=t||new h(0,0)}};class u{constructor(t,s,e,n,i=0,r=0){this.image=null,this.w=t,this.h=s,this.sx=e,this.sy=n,this.ox=i,this.oy=r}draw(t,s,e,n=null){if(null!==this.image){if(null===n)n=new r;else if(n._hidden)return;t.save(),n.applyFilter(t),t.translate(s,e),t.drawImage(this.image,this.sx,this.sy,this.w,this.h,-this.ox*n._scale,-this.oy*n._scale,this.w*n._scale,this.h*n._scale),t.restore()}}static fromJson({w:t,h:s,sx:e,sy:n,ox:i,oy:r}){return new u(t||0,s||0,e||0,n||0,i||0,r||0)}}var l=u;var d=class{constructor(t,s){this.image=new Image,this.image.src=t,this.sprites=[],this.names=[],s.forEach(t=>{const s=l.fromJson(t);s.image=this.image;const e=this.sprites.length;this.sprites[e]=s,t.hasOwnProperty("name")&&(this.names[e]=t.name.toLowerCase())})}get(t){return this.sprites[t]||null}getByName(t){return this.get(this.names.indexOf(t.toLowerCase()))}random(){return this.get(Math.floor(Math.random()*this.sprites.length))}},m=e(0),w=new d(m.b.texture,m.b.sprites);var y=class extends c{constructor(t,s,e=null){super(t,e),this.text=s}render(t){const s=this.renderOption._scale,e=this.text.split("\n"),n=e.length;for(let i=0;i<n;++i){const r=e[i],a=r.length;for(let e=0;e<a;++e){const h=w.getByName(r.charAt(e));null!==h&&h.draw(t,this.pos.x-8*s*a/2+e*s*8,this.pos.y-10*s*n/2+i*s*10,this.renderOption)}}super.render(t)}},p=new d(m.a.texture,m.a.sprites);var x=class extends c{constructor(t,s,e=null){super(s,e),this.sprite=t}render(t){const s=new h(-this.sprite.w-(this.pos.x+this.activity.camera.x)%this.sprite.w-this.sprite.h-(this.pos.y+this.activity.camera.y)%this.sprite.h),e=new h(540+this.sprite.w,540+this.sprite.h);this.renderOption._absolute||(s.x+=this.activity.camera.x,s.y+=this.activity.camera.y,e.x+=this.activity.camera.x,e.y+=this.activity.camera.y);for(let n=s.x;n<e.x;n+=this.sprite.w)for(let i=s.y;i<e.y;i+=this.sprite.h)this.sprite.draw(t,n,i,this.renderOption);super.render(t)}};var g=class extends o{constructor(){super(),this.addWidget(new x(p.random())),this.addWidget(new y(new h(270,40),"random race",r.scale(3).absolute(!0)))}update(t){this.camera.x+=t/10,super.update(t)}};Array.prototype.last=function(){return this.length>0?this[this.length-1]:null},window.requestAnimationFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||(t=>window.setTimeout(t,1e3/60)),Date.now=Date.now||(()=>(new Date).getTime()),document.addEventListener("DOMContentLoaded",()=>{const t=new n(document.getElementById("game"));t.addActivity(new g),t.update()})}]);